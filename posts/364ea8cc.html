<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="常用的设计模式">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式">
<meta property="og:url" content="http://example.com/posts/364ea8cc.html">
<meta property="og:site_name" content="blogWxy">
<meta property="og:description" content="常用的设计模式">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-04-01T08:28:41.000Z">
<meta property="article:modified_time" content="2025-04-01T08:29:28.067Z">
<meta property="article:author" content="Wxy">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/posts/364ea8cc.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>设计模式 | blogWxy</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">blogWxy</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录学习的点点滴滴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/posts/364ea8cc.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="Wxy">
      <meta itemprop="description" content="故事开始于2025/2/24 15：47">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogWxy">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          设计模式
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-04-01 16:28:41 / 修改时间：16:29:28" itemprop="dateCreated datePublished" datetime="2025-04-01T16:28:41+08:00">2025-04-01</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>51k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:32</span>
            </span>
            <div class="post-description">常用的设计模式</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>[TOC]</p>
<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="设计模式分类"><a href="#设计模式分类" class="headerlink" title="设计模式分类"></a>设计模式分类</h2><ul>
<li><p>创建型模式</p>
<p>通常和对象创建有关，设计到对象实例化的方式(5种)</p>
<ul>
<li>工厂模式</li>
<li>抽象工厂模式</li>
<li>建造者模式</li>
<li>原型模式</li>
<li>单例模式</li>
</ul>
</li>
<li><p>结构型模式</p>
<p>描述的是如何组合类和对象获得更大的结构(7种)</p>
<ul>
<li>代理模式</li>
<li>装饰者模式</li>
<li>适配器模式</li>
<li>桥接模式</li>
<li>组合模式</li>
<li>外观模式</li>
<li>享元模式</li>
</ul>
</li>
<li><p>行为型模式</p>
<p>描述的类和对象的交互以及分配职责(11种 )</p>
<ul>
<li>模板方法模式</li>
<li>命令模式</li>
<li>责任链模式</li>
<li>策略模式</li>
<li>中介者模式</li>
<li>观察者模式</li>
<li>备忘录模式</li>
<li>访问者模式</li>
<li>状态模式</li>
<li>解释器模式</li>
<li>迭代器模式</li>
</ul>
</li>
</ul>
<h2 id="面向对象的设计原则"><a href="#面向对象的设计原则" class="headerlink" title="面向对象的设计原则"></a>面向对象的设计原则</h2><h3 id="依赖倒置原则-DIP"><a href="#依赖倒置原则-DIP" class="headerlink" title="依赖倒置原则(DIP)"></a>依赖倒置原则(DIP)</h3><p>DIP：Dependence Inversion Principle</p>
<ul>
<li>高层(稳定)不依赖低层(变化)，两者依赖抽象(稳定)。</li>
<li>抽象(稳定)不依赖细节(变化)，细节依赖抽象(稳定)。</li>
</ul>
<h3 id="开放封闭原则-OCP"><a href="#开放封闭原则-OCP" class="headerlink" title="开放封闭原则(OCP)"></a>开放封闭原则(OCP)</h3><p>OCP:Open For Extension, Closed For Modification Principle</p>
<ul>
<li><p>对扩展开放，对更改封闭</p>
</li>
<li><p>类模块可扩展， 但不可修改</p>
</li>
</ul>
<h3 id="单一职责原则-SRP"><a href="#单一职责原则-SRP" class="headerlink" title="单一职责原则(SRP)"></a>单一职责原则(SRP)</h3><p>SRP:Single Responsibility Principle</p>
<ul>
<li>一个类应该仅有一个引起它变化的原因</li>
<li>变化的方向隐含类的责任</li>
</ul>
<h3 id="里氏替换原则-LSP"><a href="#里氏替换原则-LSP" class="headerlink" title="里氏替换原则(LSP)"></a>里氏替换原则(LSP)</h3><p>LSP:Liskov Substitution Principle</p>
<ul>
<li>子类必须能够替换它们的基类</li>
<li>继承表达类型抽象</li>
</ul>
<h3 id="接口隔离原则-ISP"><a href="#接口隔离原则-ISP" class="headerlink" title="接口隔离原则(ISP)"></a>接口隔离原则(ISP)</h3><ul>
<li>不应该强迫客户程序依赖他们不用的方法</li>
<li>接口应该小而完备</li>
<li>一个接口应该只提供一种对外功能</li>
</ul>
<h3 id="优先组合不是继承原则-CARP"><a href="#优先组合不是继承原则-CARP" class="headerlink" title="优先组合不是继承原则(CARP)"></a>优先组合不是继承原则(CARP)</h3><p>CARP：Composite&#x2F;Aggregate Reuse Principle</p>
<ul>
<li>类的继承通常是”白箱复用”，对象组合通常是”黑箱复用”</li>
<li>继承在一定程序破坏封装性，子类和父类耦合度高</li>
</ul>
<h3 id="迪米特法则-LOD"><a href="#迪米特法则-LOD" class="headerlink" title="迪米特法则(LOD)"></a>迪米特法则(LOD)</h3><p>LOD：Law of Demeter</p>
<ul>
<li>对象应当对其他对象尽可能少的了解</li>
<li>各个模块之间相互调用时，通常会提供一个统一的接口来实现</li>
</ul>
<h2 id="c-类图"><a href="#c-类图" class="headerlink" title="c++类图"></a>c++类图</h2><h3 id="什么是类图"><a href="#什么是类图" class="headerlink" title="什么是类图"></a>什么是类图</h3><p>类图(Class diagram)是显示了模型的静态结构，特别是模型中存在的类、类的内部结构以及它们与其他类的关系等。类图不显示暂时性的信息。类图是面向对象建模的主要组成部分。它既用于应用程序的系统分类的一般概念建模，也用于详细建模，将模型转换成编程代码。</p>
<h3 id="类图作用"><a href="#类图作用" class="headerlink" title="类图作用"></a>类图作用</h3><p>类图(Class diagram)是显示了模型的静态结构，特别是模型中存在的类、类的内部结构以及它们与其他类的关系等。类图不显示暂时性的信息。类图是面向对象建模的主要组成部分。它既用于应用程序的系统分类的一般概念建模，也用于详细建模，将模型转换成编程代码。<br>：描述类的本身结构以及类与类之间一些关系</p>
<h3 id="类图的元素"><a href="#类图的元素" class="headerlink" title="类图的元素"></a>类图的元素</h3><p>在类图中一共包含了以下几种模型元素，分别是：类（Class）、接口（Interface）、依赖（Dependency）关系、泛化（Generalization）关系、关联（Association）关系、聚合关系（Aggregation）、组合关系（Composition）和实现（Realization）关系。</p>
<h2 id="类图中类的组成"><a href="#类图中类的组成" class="headerlink" title="类图中类的组成"></a>类图中类的组成</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+: 公有属性</span><br><span class="line">-: 私有属性</span><br><span class="line">#: 保护属性</span><br><span class="line">name:<span class="built_in">string</span>  成员名:类型</span><br><span class="line">eat():<span class="type">void</span>   成员函数:返回值类型</span><br><span class="line">斜体:抽象类或者纯虚函数</span><br></pre></td></tr></table></figure>

<h3 id="类中图类的关系"><a href="#类中图类的关系" class="headerlink" title="类中图类的关系"></a>类中图类的关系</h3><ul>
<li><p>依赖（Dependency）关系</p>
<p>依赖关系是指两个或多个类之间的依存关系，如植物类依赖于土壤类。 依赖关系还可以再细分为5种类型，分别是绑定（Binding）依赖、实现（Realization）依赖、使用（Usage）依赖、抽象（Abstraction）依赖和授权（Permission）依赖。</p>
<p>(<strong>依赖关系用虚线箭头来表示，箭头指向为依赖的方向</strong>)</p>
</li>
<li><p>泛化（Generalization）关系</p>
<p>简单的讲就是类之间的继承关系。</p>
<p>  (<strong>用空心三角形-实线来表示，箭头指向为父类</strong>)</p>
</li>
<li><p>关联（Association）关系</p>
<p>关联关系是类之间一种相互影响的关系，影响的方向就是关联的方向。</p>
<p>（<strong>关联关系用实线箭头来表示</strong>）</p>
</li>
<li><p>聚合（Aggregation)关系</p>
<p>聚合关系是类之间的一种较弱的耦合关系，如一个字符串数组和一个字符串就是一种聚合关系。</p>
<p>（<strong>空心的菱形-实线箭头来表示，箭头指向为被聚合的类</strong>）</p>
</li>
<li><p>组合（Composition）关系</p>
<p>组合关系是类之间一种整体与部分之间的关系，如一只青蛙有四条腿，青蛙类与青蛙腿类之间的关系就是组合关系。</p>
<p>(<strong>组合关系用实心的菱形-实线箭头来表示，箭头指向为被组合的类</strong>)</p>
</li>
<li><p>实现（Realization）关系</p>
<p>一般来讲实现关系是针对类与接口之间的关系而言的。</p>
<p>(<strong>实现关系用空心三角形-虚线来表示</strong>)</p>
</li>
</ul>
<h2 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h2><h3 id="什么是单例模式"><a href="#什么是单例模式" class="headerlink" title="什么是单例模式"></a>什么是单例模式</h3><p>单例模式是一种对象创建型模式，使用单例模式，可以保证为一个类只生成唯一的实例对象。也就是说，<strong>在整个程序中，该类只存在一个实例对象</strong>。</p>
<h3 id="单例模式实现步骤"><a href="#单例模式实现步骤" class="headerlink" title="单例模式实现步骤"></a>单例模式实现步骤</h3><ol>
<li>构造函数私有化</li>
<li>提供一个全局的静态方法，访问唯一对象</li>
<li>类中定义一个静态指针，指向唯一对象</li>
</ol>
<h3 id="为什么使用单例模式"><a href="#为什么使用单例模式" class="headerlink" title="为什么使用单例模式"></a>为什么使用单例模式</h3><p>在应用系统开发中，我们常常有以下需求：</p>
<p><strong>1. 需要生成唯一序列的环境</strong><br><strong>2. 需要频繁实例化然后销毁的对象。</strong><br><strong>3. 创建对象时耗时过多或者耗资源过多，但又经常用到的对象。</strong><br><strong>4. 方便资源相互通信的环境</strong></p>
<p>实际案例:</p>
<ul>
<li>多线程中网络资源初始化</li>
<li>回收站机制</li>
<li>任务管理器</li>
<li>应用程序日志管理</li>
<li>…….</li>
</ul>
<h3 id="单例模式优缺点"><a href="#单例模式优缺点" class="headerlink" title="单例模式优缺点"></a>单例模式优缺点</h3><p><strong>优点</strong>：</p>
<ul>
<li>在内存中只有一个对象，节省内存空间；</li>
<li>避免频繁的创建销毁对象，可以提高性能；</li>
<li>避免对共享资源的多重占用，简化访问；</li>
<li>为整个系统提供一个全局访问点。</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>不适用于变化频繁的对象；</li>
<li>如果实例化的对象长时间用，系统会认为该对象是垃圾而被回收，这可能会导致对象状态的丢失；</li>
</ul>
<h3 id="单例模式实现代码"><a href="#单例模式实现代码" class="headerlink" title="单例模式实现代码"></a>单例模式实现代码</h3><h4 id="懒汉式"><a href="#懒汉式" class="headerlink" title="懒汉式"></a>懒汉式</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//懒汉式</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton_pattern</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">  <span class="comment">//对象指针</span></span><br><span class="line">  <span class="type">static</span> Singleton_pattern* singlenton;</span><br><span class="line">  <span class="comment">//创建唯一对象</span></span><br><span class="line">  <span class="function"><span class="type">static</span>  Singleton_pattern* <span class="title">getclass</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (singlenton == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      singlenton = <span class="keyword">new</span> <span class="built_in">Singleton_pattern</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span>  singlenton;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="comment">//构造函数私有化</span></span><br><span class="line">  <span class="built_in">Singleton_pattern</span>()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//要给静态成员变量赋值否则会报错</span></span><br><span class="line">Singleton_pattern* Singleton_pattern:: singlenton = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Singleton_pattern* sing = Singleton_pattern::<span class="built_in">getclass</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="饿汉式"><a href="#饿汉式" class="headerlink" title="饿汉式"></a>饿汉式</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 饿汉式</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton_pattern</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">//对象指针</span></span><br><span class="line">  <span class="type">static</span> Singleton_pattern* singlenton;</span><br><span class="line">  <span class="comment">//返回指针</span></span><br><span class="line">  <span class="function"><span class="type">static</span>  Singleton_pattern* <span class="title">getclass</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span>  singlenton;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="comment">//构造函数私有化</span></span><br><span class="line">  <span class="built_in">Singleton_pattern</span>()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//直接创建对象，与懒汉式不同是如果代码用不上这个类，就会多占用空间</span></span><br><span class="line">Singleton_pattern* Singleton_pattern::singlenton = <span class="keyword">new</span> <span class="built_in">Singleton_pattern</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Singleton_pattern* sing = Singleton_pattern::<span class="built_in">getclass</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h2><h3 id="什么是简单工厂"><a href="#什么是简单工厂" class="headerlink" title="什么是简单工厂"></a>什么是简单工厂</h3><p>简单工厂模式属于类的创建型模式,又叫做静态工厂方法模式。</p>
<p>通过专门定义一个类来负责创建其他类的实例，被创建的实例通常都具有共同的父类。</p>
<h3 id="为什么使用简单工厂"><a href="#为什么使用简单工厂" class="headerlink" title="为什么使用简单工厂"></a>为什么使用简单工厂</h3><p>减少客户程序对类创建过程的依赖</p>
<h3 id="简单工厂实现步骤"><a href="#简单工厂实现步骤" class="headerlink" title="简单工厂实现步骤"></a>简单工厂实现步骤</h3><p>1.提供一个工厂类</p>
<p>简单工厂模式的核心，它负责实现创建所有实例的内部逻辑。工厂类可以被外界直接调用，创建所需的产品对象。</p>
<p>2.提供一个抽象产品类</p>
<p>简单工厂模式所创建的所有对象的父类，它负责描述所有实例所共有的公共接口。</p>
<p>3.提供一个具体产品类</p>
<p>简单工厂模式所创建的具体实例对象</p>
<h3 id="简单工厂优缺点"><a href="#简单工厂优缺点" class="headerlink" title="简单工厂优缺点"></a>简单工厂优缺点</h3><p><strong>优点</strong>：</p>
<ul>
<li><p>帮助封装</p>
<p>实现组件封装，面向接口编程</p>
</li>
<li><p>解耦合</p>
<p>客户端和具体实现类的解耦合</p>
</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>可能增加客户端的复杂度</li>
<li>不方便扩展子工厂</li>
</ul>
<h3 id="简单工厂实现代码"><a href="#简单工厂实现代码" class="headerlink" title="简单工厂实现代码"></a>简单工厂实现代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//简单工厂模式设计简单计算器</span></span><br><span class="line"><span class="comment">//抽象类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">symbol</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="comment">//简单写模式就不写构造函数了</span></span><br><span class="line"><span class="comment">//否者下面的继承类写也写构造麻烦</span></span><br><span class="line">public:</span><br><span class="line">  <span class="type">double</span> one=<span class="number">0</span>;</span><br><span class="line">  <span class="type">double</span> twe=<span class="number">0</span>;</span><br><span class="line">  virtual <span class="type">double</span> <span class="title function_">getreturn</span><span class="params">()</span> = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">addsybol</span>:</span>public symbol</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">  <span class="type">double</span> <span class="title function_">getreturn</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> one + twe;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">minsybol</span> :</span>public symbol</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">  <span class="type">double</span> <span class="title function_">getreturn</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> one - twe;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">musybol</span> :</span>public symbol</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">  <span class="type">double</span> <span class="title function_">getreturn</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> one * twe;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">divsybol</span> :</span>public symbol</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">  <span class="type">double</span> <span class="title function_">getreturn</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (twe)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> one / twe;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">operatoron</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  <span class="type">static</span> symbol* <span class="title function_">getsy</span><span class="params">(<span class="type">char</span> s)</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">switch</span> (s)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>: <span class="keyword">return</span> new addsybol;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    ase <span class="string">&#x27;-&#x27;</span>:<span class="keyword">return</span> new minsybol;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>: <span class="keyword">return</span> new musybol;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>: <span class="keyword">return</span> new divsybol;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  symbol* p = operatoron::getsy(<span class="string">&#x27;+&#x27;</span>);</span><br><span class="line">  p-&gt;one = <span class="number">4</span>;</span><br><span class="line">  p-&gt;twe=<span class="number">6</span>;</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;p-&gt;getreturn();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h2><h3 id="什么是工厂模式"><a href="#什么是工厂模式" class="headerlink" title="什么是工厂模式"></a>什么是工厂模式</h3><p>工厂方法模式同样属于类的创建型模式又被称为多态工厂模式 。工厂方法模式的意义是 定义一个创建产品对象的工厂接口，将实际创建工作推迟到子类当中。 核心工厂类不再负责产品的创建，这样核心类成为一个抽象工厂角色，仅负责具体工厂子类 必须实现的接口，这样进一步抽象化的好处是使得工厂方法模式可以使系统在不修改具体工 厂角色的情况下引进新的产品</p>
<h3 id="为什么使用工厂模式"><a href="#为什么使用工厂模式" class="headerlink" title="为什么使用工厂模式"></a>为什么使用工厂模式</h3><p>工厂方法模式与简单工厂模式在结构上的不同不是很明显。工厂方法类的核心是一个抽象工厂类，而简单工厂模式把核心放在一个具体类上。 工厂方法模式之所以有一个别名叫多态性工厂模式是因为具体工厂类都有共同的接口， 或者有共同的抽象父类。 当系统扩展需要添加新的产品对象时，仅仅需要添加一个具体对象以及一个具体工厂对 象，原有工厂对象不需要进行任何修改，也不需要修改客户端，很好的符合了“开放－封闭” 原则。而简单工厂模式在添加新产品对象后不得不修改工厂方法，扩展性不好。工厂方法模式退化后可以演变成简单工厂模式。</p>
<h3 id="工厂模式实现步骤"><a href="#工厂模式实现步骤" class="headerlink" title="工厂模式实现步骤"></a>工厂模式实现步骤</h3><p>1.提供一个抽象工厂类 :所有具体工厂类的父类</p>
<p>2.提供与产品对应的工厂类:负责实例化产品对象</p>
<p>3.提供一个抽象产品类： 所有产品的父类</p>
<p>4.提供一个或多个产品类:工厂方法模式所创建的具体实例对象</p>
<h3 id="工厂模式优缺点"><a href="#工厂模式优缺点" class="headerlink" title="工厂模式优缺点"></a>工厂模式优缺点</h3><p><strong>优点</strong>：</p>
<ul>
<li><p>需求改变时改动最小</p>
</li>
<li><p>具体的创建实例过程与客户端分离</p>
</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>新增功能时，工程量稍大</li>
</ul>
<h3 id="工厂模式实现代码"><a href="#工厂模式实现代码" class="headerlink" title="工厂模式实现代码"></a>工厂模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//先商品再工厂，工厂是创建商品的！</span></span><br><span class="line"><span class="comment">//构建商品抽象类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">app</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">getapp</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构建工厂抽象类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">factory</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> app* <span class="title">makeapp</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建产品子类-飞机</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">plantapp</span> :<span class="keyword">public</span> app</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">getapp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;飞机....\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建工厂子类-飞机</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">makeplant</span> :<span class="keyword">public</span> factory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function">app* <span class="title">makeapp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> plantapp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建产品子类-飞机</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">rocketapp</span> :<span class="keyword">public</span> app</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">getapp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;火箭....\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建工厂子类-火箭</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">makerocket</span> :<span class="keyword">public</span> factory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function">app* <span class="title">makeapp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> rocketapp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//造飞机</span></span><br><span class="line">  factory* p = <span class="keyword">new</span> makeplant;</span><br><span class="line">  app* t = p-&gt;<span class="built_in">makeapp</span>();</span><br><span class="line">  t-&gt;<span class="built_in">getapp</span>();</span><br><span class="line">  <span class="comment">//造火箭</span></span><br><span class="line">  factory* ps = <span class="keyword">new</span> makerocket;</span><br><span class="line">  app* ts = ps-&gt;<span class="built_in">makeapp</span>();</span><br><span class="line">   ts-&gt;<span class="built_in">getapp</span>();</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h2><h3 id="什么是抽象工厂模式"><a href="#什么是抽象工厂模式" class="headerlink" title="什么是抽象工厂模式"></a>什么是抽象工厂模式</h3><p>抽象工厂模式是所有形态的工厂模式中最为抽象和最其一般性的。抽象工厂模式可以向 客户端提供一个接口，使得客户端在不必指定产品的具体类型的情况下，能够创建多个产品族的产品对象。</p>
<h3 id="为什么使用抽象工厂模式"><a href="#为什么使用抽象工厂模式" class="headerlink" title="为什么使用抽象工厂模式"></a>为什么使用抽象工厂模式</h3><p>抽象工厂方法是针对与一个产品族，使得易于交换产品系列，只需改变具体的工厂就可以使用不同的产品配置。当一个族中的产品对象被设计成一起工作且一个应用只是用同一族的对象，例如设计系统生成不同风格的UI界面，按钮，边框等UI元素在一起使用，并且只能同属于一种风格，这很容易使用抽象工厂实现。</p>
<h3 id="抽象工厂模式实现步骤"><a href="#抽象工厂模式实现步骤" class="headerlink" title="抽象工厂模式实现步骤"></a>抽象工厂模式实现步骤</h3><p>**1.提供一个抽象工厂类：**声明一组创建一族产品的工厂方法</p>
<p>**2.提供一个具体工厂类：**实现了在抽象工厂创建产品的工厂方法</p>
<p>**3.提供一个抽象产品类：**抽象产品中声明了产品具有的业务方法</p>
<p>**4.提供一个具体产品类：**实现抽象产品接口中声明的业务方法</p>
<h3 id="抽象工厂模式优缺点"><a href="#抽象工厂模式优缺点" class="headerlink" title="抽象工厂模式优缺点"></a>抽象工厂模式优缺点</h3><p><strong>优点</strong>：</p>
<ul>
<li>抽象工厂封装了变化，封装了对象创建的具体细节</li>
<li>增加新的产品族很方便，无须修改已有系统</li>
<li>针对接口进行编程而不是针对具体进行编程</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>增加新的产品等级结构需对原系统做较大修改(违背开放封闭)</li>
</ul>
<h3 id="抽象工厂模式实现代码"><a href="#抽象工厂模式实现代码" class="headerlink" title="抽象工厂模式实现代码"></a>抽象工厂模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//抽象工厂以键盘鼠标为例</span></span><br><span class="line"><span class="comment">//抽象商品类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象商品类1</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">KeyBoard</span> :<span class="keyword">public</span> Product&#123;&#125;;</span><br><span class="line"><span class="comment">//具体商品</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LogiKeyBoard</span>:<span class="keyword">public</span> KeyBoard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;罗技键盘\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RazerKeyBoard</span> :<span class="keyword">public</span> KeyBoard</span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;雷蛇键盘\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象商品类2</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mouse</span> :<span class="keyword">public</span> Product &#123;&#125;;</span><br><span class="line"><span class="comment">//具体商品</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LogiMouse</span> :<span class="keyword">public</span> Mouse</span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;罗技鼠标\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RazerMouse</span> :<span class="keyword">public</span> Mouse</span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;雷蛇鼠标\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Product* <span class="title">creatkeyboard</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Product* <span class="title">creatkemouse</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//商品集1工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LogiFactory</span> :<span class="keyword">public</span> Factory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="function">Product* <span class="title">creatkeyboard</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LogiKeyBoard;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function">Product* <span class="title">creatkemouse</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LogiMouse;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//商品集2工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RazerFactory</span> :<span class="keyword">public</span> Factory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="function">Product* <span class="title">creatkeyboard</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RazerKeyBoard;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function">Product* <span class="title">creatkemouse</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123; </span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> RazerMouse;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//先建立工厂后商品</span></span><br><span class="line">  Factory* p = <span class="keyword">new</span> <span class="built_in">LogiFactory</span>();</span><br><span class="line">  Product* t = p-&gt;<span class="built_in">creatkemouse</span>();</span><br><span class="line">  Product* s = p-&gt;<span class="built_in">creatkeyboard</span>();</span><br><span class="line">  t-&gt;<span class="built_in">show</span>();</span><br><span class="line">  s-&gt;<span class="built_in">show</span>();</span><br><span class="line">  <span class="keyword">delete</span> p;</span><br><span class="line">  <span class="keyword">delete</span> t;</span><br><span class="line">  <span class="keyword">delete</span> s;</span><br><span class="line">  p = <span class="keyword">new</span> RazerFactory;</span><br><span class="line">  t = p-&gt;<span class="built_in">creatkemouse</span>();</span><br><span class="line">  s = p-&gt;<span class="built_in">creatkeyboard</span>();</span><br><span class="line">  t-&gt;<span class="built_in">show</span>();</span><br><span class="line">  s-&gt;<span class="built_in">show</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h2><h3 id="什么是建造者模式"><a href="#什么是建造者模式" class="headerlink" title="什么是建造者模式"></a>什么是建造者模式</h3><p>建造者模式是一种对象创建型模式之一，用来隐藏复合对象的创建过程，它把复合对象的创建过程加以抽象，通过子类继承和重载的方式，动态地创建具有复合属性的对象。官方说法就是将一个复杂对象的构造与它的表示分离，使同样的构建过程可以创建不同的表示。</p>
<h3 id="为什么使用建造者模式"><a href="#为什么使用建造者模式" class="headerlink" title="为什么使用建造者模式"></a>为什么使用建造者模式</h3><p>主要解决在软件系统中，有时候面临着”一个复杂对象”的创建工作，其通常由各个部分的子对象用一定的算法构成；由于需求的变化，这个复杂对象的各个部分经常面临着剧烈的变化，但是将它们组合在一起的算法却相对稳定。</p>
<h3 id="建造者模式实现步骤"><a href="#建造者模式实现步骤" class="headerlink" title="建造者模式实现步骤"></a>建造者模式实现步骤</h3><p>1.提供抽象建造者类: 为创建产品各个部分，统一抽象接口</p>
<p>2.提供具体建造者类：具体实现抽象建造者各个部件的接口</p>
<p>3.提供多个具体产品类:具体的创建产品的各个部分</p>
<p>4.提供一个指挥类：负责安排和调度复杂对象的各个建造过程</p>
<h3 id="建造者模式优缺点"><a href="#建造者模式优缺点" class="headerlink" title="建造者模式优缺点"></a>建造者模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li><p>封装性好，构建和表示分离</p>
</li>
<li><p>扩展性好，各个具体的建造者相互独立，有利于系统的解耦</p>
</li>
<li><p>控制细节风险，客户端无需详知细节，建造者细化创建过程</p>
</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li><p>产品的组成部分必须相同，这限制了其使用范围</p>
</li>
<li><p>产品内部发生变化，建造者需同步修改，后期维护成本较大</p>
</li>
</ul>
<h3 id="建造者模式实现代码"><a href="#建造者模式实现代码" class="headerlink" title="建造者模式实现代码"></a>建造者模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//电脑组装:显示器、鼠标、键盘、主机（主机又包括cpu、显卡、主板等）</span></span><br><span class="line"><span class="comment">//1.找到店铺老板告诉需求</span></span><br><span class="line"><span class="comment">//2.客服安排技术员工组装</span></span><br><span class="line"><span class="comment">//3.产品组装完成</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象产品类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Products</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">setdisplayer</span><span class="params">(string displayer)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">setmouse</span><span class="params">(string mouse)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">setkeyboard</span><span class="params">(string keyboard)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">sethost</span><span class="params">(string host)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体产品类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">computer</span> :<span class="keyword">public</span> Products</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">setdisplayer</span><span class="params">(string displayer)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     list.<span class="built_in">push_back</span>(displayer);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">setmouse</span><span class="params">(string mouse)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     list.<span class="built_in">push_back</span>(mouse);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">setkeyboard</span><span class="params">(string keyboard)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     list.<span class="built_in">push_back</span>(keyboard);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">sethost</span><span class="params">(string host)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     list.<span class="built_in">push_back</span>(host); </span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     cout &lt;&lt; <span class="string">&quot;配置为：\n&quot;</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">auto</span> i : list)</span><br><span class="line">    &#123;</span><br><span class="line">       cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  vector&lt;string&gt; list; <span class="comment">//组件清单</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象建造者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Builder</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Builder</span>():<span class="built_in">pc</span>(<span class="keyword">new</span> computer)&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">builderdisplayer</span><span class="params">(string displayer)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">buildermouse</span><span class="params">(string mouse)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">builderkeyboard</span><span class="params">(string keyboard)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">builderhost</span><span class="params">(string host)</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//得到电脑</span></span><br><span class="line">   <span class="function">Products* <span class="title">getpc</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> pc;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">   Products* pc;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体建造者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">people</span> :<span class="keyword">public</span> Builder</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">builderdisplayer</span><span class="params">(string displayer)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">getpc</span>()-&gt;<span class="built_in">setdisplayer</span>(displayer);</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">buildermouse</span><span class="params">(string mouse)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">getpc</span>()-&gt;<span class="built_in">setmouse</span>(mouse);</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">builderkeyboard</span><span class="params">(string keyboard)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">getpc</span>()-&gt;<span class="built_in">setkeyboard</span>(keyboard);</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">builderhost</span><span class="params">(string host)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">getpc</span>()-&gt;<span class="built_in">sethost</span>(host);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//指挥者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Director</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Director</span>(Builder* p) :<span class="built_in">pc</span>(p) &#123;&#125;</span><br><span class="line">  <span class="function">Products* <span class="title">getpc</span><span class="params">(string displayer, string mouse, string keyboard, string host)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    pc-&gt;<span class="built_in">builderdisplayer</span>(displayer);</span><br><span class="line">    pc-&gt;<span class="built_in">builderkeyboard</span>(keyboard);</span><br><span class="line">    pc-&gt;<span class="built_in">buildermouse</span>(mouse);</span><br><span class="line">    pc-&gt;<span class="built_in">builderhost</span>(host);</span><br><span class="line">    <span class="keyword">return</span> pc-&gt;<span class="built_in">getpc</span>();</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  Builder* pc;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Builder* t = <span class="keyword">new</span> people;<span class="comment">//创建一个建造者</span></span><br><span class="line">  Director* s = <span class="keyword">new</span> <span class="built_in">Director</span>(t);<span class="comment">//指挥者里放一个建造者</span></span><br><span class="line">  Products* w = s-&gt;<span class="built_in">getpc</span>(<span class="string">&quot;华为显示器&quot;</span>, <span class="string">&quot;牧马人鼠标&quot;</span>, <span class="string">&quot;雷蛇键盘&quot;</span>, <span class="string">&quot;外星人&quot;</span>);<span class="comment">//；建造者建造一个电脑</span></span><br><span class="line">  w-&gt;<span class="built_in">show</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h2><h3 id="什么是原型模式"><a href="#什么是原型模式" class="headerlink" title="什么是原型模式"></a>什么是原型模式</h3><p>用原型实例指定创建对象的种类，并通过拷贝这些原型创建新的对象，简单理解就是“<strong>克隆指定对象</strong>”</p>
<h3 id="为什么使用原型模式"><a href="#为什么使用原型模式" class="headerlink" title="为什么使用原型模式"></a>为什么使用原型模式</h3><p>某些结构复杂的对象的创建工作中由于需求的变化，这些对象经常面临着剧烈的变化，但是他们却拥有比较稳定一致的接口。此时便可以使用原型模式。</p>
<h3 id="原型模式实现步骤"><a href="#原型模式实现步骤" class="headerlink" title="原型模式实现步骤"></a>原型模式实现步骤</h3><ol>
<li>提供一个抽象原型类：规定了具体原型对象必须实现的接口。</li>
<li>提供多个具体原型类：实现抽象原型类的 <code>clone()</code> 方法，它是可被复制的对象。</li>
<li>提供访问类：使用具体原型类中的 <code>clone()</code> 方法来复制新的对象。</li>
</ol>
<h3 id="原型模式优缺点"><a href="#原型模式优缺点" class="headerlink" title="原型模式优缺点"></a>原型模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>如果创建新的对象比较复杂，可以利用原型模式简化对象的创建过程，同时也能够提高效率。</li>
<li>简化对象的创建，无需理会创建过程。</li>
<li>可以在程序运行时（对象属性发生了变化）获得一份内容相同的实例，他们之间不会相互干扰</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>每一个类都必须配备一个克隆方法,对于已有的没有克隆方法的类来说是致命的。</li>
</ul>
<h3 id="原型模式实现代码"><a href="#原型模式实现代码" class="headerlink" title="原型模式实现代码"></a>原型模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//原来的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">monkey</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">monkey</span>()&#123;&#125;</span><br><span class="line">  <span class="keyword">virtual</span> ~<span class="built_in">monkey</span>()&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> monkey* <span class="title">cop</span><span class="params">()</span> </span>= <span class="number">0</span>;<span class="comment">//克隆</span></span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>= <span class="number">0</span>;<span class="comment">//行为</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//实现的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sunwukong</span> :<span class="keyword">public</span> monkey</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">sunwukong</span>(string name)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  ~<span class="built_in">sunwukong</span>()&#123;&#125;</span><br><span class="line">  <span class="built_in">sunwukong</span>(<span class="type">const</span> sunwukong&amp; s)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//当需要申请内存的出现时必须使用深拷贝</span></span><br><span class="line">    name = s.name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; <span class="string">&quot;正在玩\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function">monkey* <span class="title">cop</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">sunwukong</span>(*<span class="keyword">this</span>);<span class="comment">//创建一个新的</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  string name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  monkey* s = <span class="keyword">new</span> <span class="built_in">sunwukong</span>(<span class="string">&quot;小猴子&quot;</span>);</span><br><span class="line">  monkey* t = s-&gt;<span class="built_in">cop</span>();</span><br><span class="line">  monkey* w = t-&gt;<span class="built_in">cop</span>();</span><br><span class="line">  s-&gt;<span class="built_in">play</span>();</span><br><span class="line">  t-&gt;<span class="built_in">play</span>();</span><br><span class="line">  w-&gt;<span class="built_in">play</span>();</span><br><span class="line">  <span class="keyword">delete</span> s;</span><br><span class="line">  <span class="keyword">delete</span> w;</span><br><span class="line">  <span class="keyword">delete</span> t;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建型模式总结"><a href="#创建型模式总结" class="headerlink" title="创建型模式总结"></a>创建型模式总结</h3><p>工厂模式模式：单个类的对象创建工作</p>
<p>抽象工厂模式：多个类的对象创建工作</p>
<p>单例模式:类的全局对象创建工作</p>
<p>建造者模式:复杂类的对象创建工作</p>
<p>原型模式：自身类的克隆工作</p>
<p>到目前为止，五个创建模式都汇总了，各有各的用途，在实际运用中，要多对比，哪种创建模式才适合，设计模式虽好，但要学会正确的运用，将会像把利刃，非常有利于项目的扩展易用等。</p>
<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><h3 id="什么是代理模式"><a href="#什么是代理模式" class="headerlink" title="什么是代理模式"></a>什么是代理模式</h3><p>代理模式是构造型的设计模式之一，它可以为其他对象提供一 种代理以控制对这个对象的访问。 所谓代理，是指具有与代理元（被代理的对象）具有相同的接口的类，客户端必须 通过代理与被代理的目标类交互，而代理一般在交互的过程中（交互前后），进行某些 特别的处理。 </p>
<h3 id="为什么使用代理模式"><a href="#为什么使用代理模式" class="headerlink" title="为什么使用代理模式"></a>为什么使用代理模式</h3><p>在目标对象实现的基础上,增强额外的功能操作,即扩展目标对象的功能. </p>
<p>代理模式的作用：AOP实现，拦截器，中介，黄牛，解耦，专人做专事。</p>
<p>AOP:面向切面编程，通过预编译方式和运行期间动态代理实现程序功能的统一维护的一种技术。</p>
<h3 id="代理模式实现步骤"><a href="#代理模式实现步骤" class="headerlink" title="代理模式实现步骤"></a>代理模式实现步骤</h3><p>1.提供一个抽象主题角色：真实主题与代理主题的共同接口</p>
<p>2.提供一个真实主题角色：定义了代理角色所代表的真实对象</p>
<p>3.提供一个代理主题角色：含有对真实主题角色的引用</p>
<h3 id="代理模式优缺点"><a href="#代理模式优缺点" class="headerlink" title="代理模式优缺点"></a>代理模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li><p>职责清晰：**真实角色就是实现实际业务逻辑，**不关心其他非本职责事务，<strong>通过后期代理完成一件事务，附带结果就是编程简介清晰。</strong></p>
</li>
<li><p>高扩展性：具体<strong>主题角色可变</strong>。</p>
</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>代理模式可能会造成<strong>请求的处理速度变慢</strong></li>
</ul>
<h3 id="代理模式实现代码"><a href="#代理模式实现代码" class="headerlink" title="代理模式实现代码"></a>代理模式实现代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//抽象主题类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  virtual <span class="type">void</span> <span class="title function_">BuyTicket</span><span class="params">()</span> = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//用户买票</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Use</span>:</span>public Subject</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">  <span class="type">void</span> <span class="title function_">BuyTicket</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;用户买票\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//携程买票</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ctrip</span> :</span>public Subject</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">  Ctrip(Subject* t):s(t)&#123;&#125;</span><br><span class="line">  <span class="type">void</span> <span class="title function_">BuyTicket</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;携程买票\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">private:</span><br><span class="line">  Subject* s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  Subject* s = new Use;</span><br><span class="line">  s-&gt;BuyTicket();</span><br><span class="line">  Subject* t = new Ctrip(s);</span><br><span class="line">  t-&gt;BuyTicket();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="装饰模式"><a href="#装饰模式" class="headerlink" title="装饰模式"></a>装饰模式</h2><h3 id="什么是装饰模式"><a href="#什么是装饰模式" class="headerlink" title="什么是装饰模式"></a>什么是装饰模式</h3><p>装饰（ Decorator ）模式又叫做包装模式。通过一种对客户端透明的方式来扩展对象的功能，是继承关系的一个替换方案。 装饰模式就是把要添加的附加功能分别放在单独的类中，并让这个类包含它要装饰的对 象，当需要执行时，客户端就可以有选择地、按顺序地使用装饰功能包装对象。</p>
<h3 id="为什么使用装饰模式"><a href="#为什么使用装饰模式" class="headerlink" title="为什么使用装饰模式"></a>为什么使用装饰模式</h3><p>装饰模式可以动态的给一个对象添加一些额外的职责。就增加功能来说，此模式比生成子类更为灵活,通过子类继承的方式，但是如果后续继续增加功能的话，便要继续继承现有的类，如此就会使继承的层次越来越深，不利与代码的维护和可读性。故最好的方式便是通过装饰者模式来完成。</p>
<h3 id="装饰模式实现步骤"><a href="#装饰模式实现步骤" class="headerlink" title="装饰模式实现步骤"></a>装饰模式实现步骤</h3><p>1.提供一个抽象组件类:抽象被装饰者的行为</p>
<p>2.提供一个或多个具体组件类:被装饰者的行为具体实现</p>
<p>3.提供一个抽象装饰器类：抽象组件指针与抽象组件一致接口</p>
<p>4.提供一个具体的装饰器类：为具体组件附加责任</p>
<h3 id="装饰模式优缺点"><a href="#装饰模式优缺点" class="headerlink" title="装饰模式优缺点"></a>装饰模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>易于扩展对象功能</li>
<li>通过装饰类的排列组合，可创造出很多不同行为的组合</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>会出现更多的代码，更多的类，增加程序复杂性</li>
<li>动态装饰时，多层装饰时会更复杂</li>
</ul>
<h3 id="装饰模式代实现代码"><a href="#装饰模式代实现代码" class="headerlink" title="装饰模式代实现代码"></a>装饰模式代实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//写一个变装样例</span></span><br><span class="line"><span class="comment">//抽象组件类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractCompent</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">  string look;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体组件类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">doll</span> :<span class="keyword">public</span> AbstractCompent</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">doll</span>()</span><br><span class="line">  &#123;</span><br><span class="line">    look = <span class="string">&quot;一个洋娃娃&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; look &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象装饰类</span></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">AbstractDecrate</span> :<span class="keyword">public</span>  AbstractCompent</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  AbstractCompent* pBase;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体装饰类1</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">maxiskit</span> :<span class="keyword">public</span> AbstractDecrate</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">maxiskit</span>(AbstractCompent* pBase)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;pBase = pBase;</span><br><span class="line">    <span class="keyword">this</span>-&gt;pBase-&gt;look += <span class="string">&quot;穿一身长裙&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; pBase-&gt;look &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体装饰类2</span></span><br><span class="line"><span class="comment">//具体装饰类1</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">long_hair</span> :<span class="keyword">public</span> AbstractDecrate</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">long_hair</span>(AbstractCompent* pBase)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;pBase = pBase;</span><br><span class="line">    <span class="keyword">this</span>-&gt;pBase-&gt;look += <span class="string">&quot;长一头暗红色的长发&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; pBase-&gt;look &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  doll* g = <span class="keyword">new</span> doll;</span><br><span class="line">  g-&gt;<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">  maxiskit* t = <span class="keyword">new</span> <span class="built_in">maxiskit</span>(g);</span><br><span class="line">  t-&gt;<span class="built_in">show</span>();</span><br><span class="line">  long_hair* s = <span class="keyword">new</span> <span class="built_in">long_hair</span>(g);</span><br><span class="line">  s-&gt;<span class="built_in">show</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h2><h3 id="什么是适配器模式"><a href="#什么是适配器模式" class="headerlink" title="什么是适配器模式"></a>什么是适配器模式</h3><p>适配器模式是将一个类的接口转换成客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。好比日本现在就只提供110V的电压，而我的电脑就需要220V的电压，那怎么办啦?适配器就是干这活的，在不兼容的东西之间搭建一座桥梁，让二者能很好的兼容在一起工作。</p>
<h3 id="为什么使用适配器模式"><a href="#为什么使用适配器模式" class="headerlink" title="为什么使用适配器模式"></a>为什么使用适配器模式</h3><p>在软件开发中，有的时候系统的数据和行为都正确，但接口不符合，我们应该考虑使用适配器模式，目的是使控制范围之外的一个原有对象与某个接口匹配。举个例子:在开发一个模块的时候，有一个功能点实现起来比较费劲，但是，之前有一个项目的模块实现了一样的功能点;但是现在这个模块的接口和之前的那个模块的接口是不一致的。此时，作为项目经理的你，该怎么办啦?使用适配器模式，将之前实现的功能点适配进新的项目了。</p>
<h3 id="适配器模式实现步骤"><a href="#适配器模式实现步骤" class="headerlink" title="适配器模式实现步骤"></a>适配器模式实现步骤</h3><ol>
<li>适配器实现与其中一个现有对象兼容的接口</li>
<li>现有对象可以使用该接口安全地调用适配器方法</li>
<li>适配器方法被调用后将以另一个对象兼容的格式和顺序将请求传递给该对象</li>
</ol>
<p>一般适配器模式分为以下两类:</p>
<ul>
<li>对象适配器:适配器实现了其中一个对象的接口， 并对另一个对象进行封装</li>
<li>类适配器:适配器同时继承两个对象的接口</li>
</ul>
<h3 id="适配器模式优缺点"><a href="#适配器模式优缺点" class="headerlink" title="适配器模式优缺点"></a>适配器模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>降低了去实现一个功能点的难度，可以对现有的类进行包装，就可以进行使用了</li>
<li>提高了项目质量，现有的类一般都是经过测试的，使用了适配器模式之后，不需要对旧的类进行全面的覆盖测试;</li>
<li>总的来说,提高了效率,降低了成本。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>类适配器模式，由于多继承，可能会出现二义性</li>
<li>对象适配器模式，如果过多使用适配器模式，会导致代码阅读难度增大</li>
</ul>
<h3 id="适配器模式实现代码"><a href="#适配器模式实现代码" class="headerlink" title="适配器模式实现代码"></a>适配器模式实现代码</h3><h4 id="对象适配器实现代码"><a href="#对象适配器实现代码" class="headerlink" title="对象适配器实现代码"></a>对象适配器实现代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//电源插头</span></span><br><span class="line"><span class="comment">//三口插头</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">threehand</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  <span class="type">void</span> <span class="title function_">threehandout</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">  	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;三头充电器\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//用户需要用的接头虚拟类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Abtwo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  virtual <span class="type">void</span> <span class="title function_">three_twe</span><span class="params">()</span> = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//两头接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">twohand</span> :</span>public Abtwo</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">  <span class="type">void</span> <span class="title function_">three_twe</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;两插头充电\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//对象适配器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AdapterObject</span> :</span>public Abtwo</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">  AdapterObject(threehand* p)</span><br><span class="line">  &#123;</span><br><span class="line">    th = p;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">void</span> <span class="title function_">transition</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;三头转化为二头\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">void</span> <span class="title function_">three_twe</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    transition();</span><br><span class="line">    th-&gt;threehandout();</span><br><span class="line">  &#125;</span><br><span class="line">  threehand* th;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  threehand* p = new threehand;</span><br><span class="line">  Abtwo* w = new AdapterObject(p);</span><br><span class="line">  w-&gt;three_twe();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类适配器实现代码"><a href="#类适配器实现代码" class="headerlink" title="类适配器实现代码"></a>类适配器实现代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//电源插头</span></span><br><span class="line"><span class="comment">//三口插头</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">threehand</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">threehandout</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;三头充电器\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//用户需要用的接头虚拟类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Abtwo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">three_twe</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//两头接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">twohand</span> :<span class="keyword">public</span> Abtwo</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">three_twe</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;两插头充电\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//类适配器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdapterObject</span> :<span class="keyword">public</span> Abtwo,<span class="keyword">public</span> threehand</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">transition</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;三头转化为二头\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">three_twe</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">transition</span>();</span><br><span class="line">    <span class="built_in">threehandout</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  threehand* p = <span class="keyword">new</span> threehand;</span><br><span class="line">  Abtwo* w = <span class="keyword">new</span> <span class="built_in">AdapterObject</span>();</span><br><span class="line">  w-&gt;<span class="built_in">three_twe</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h2><h3 id="什么是桥接模式"><a href="#什么是桥接模式" class="headerlink" title="什么是桥接模式"></a>什么是桥接模式</h3><p>桥接模式是一种结构型设计模式， 可将业务逻辑或一个大类拆分为不同的层次结构， 从而能独立地进行开发。桥接模式通过将继承改为组合的方式来解决这个问题。 具体来说， 就是抽取其中一个维度并使之成为独立的类层次， 这样就可以在初始类中引用这个新层次的对象， 从而使得一个类不必拥有所有的状态和行为。层次结构中的第一层 （通常称为抽象部分） 将包含对第二层 （实现部分） 对象的引用。 抽象部分将能将一些 （有时是绝大部分） 对自己的调用委派给实现部分的对象。 所有的实现部分都有一个通用接口， 因此它们能在抽象部分内部相互替换。</p>
<h3 id="为什么使用桥接模式"><a href="#为什么使用桥接模式" class="headerlink" title="为什么使用桥接模式"></a>为什么使用桥接模式</h3><p>桥接模式在处理跨平台应用、 支持多种类型的数据库服务器或与多个特定种类 （例如云平台和社交网络等） 的 API 供应商协作时会特别有用。</p>
<h3 id="桥接模式实现步骤"><a href="#桥接模式实现步骤" class="headerlink" title="桥接模式实现步骤"></a>桥接模式实现步骤</h3><p>1.提供一个抽象类:提供高层控制逻辑,依赖实际底层对象</p>
<p>2.提供一个精准抽象类:拓展抽象类,更精确的抽象</p>
<p>3.提供具体实现抽象类:具体实现类的抽象通用接口</p>
<p>4.提供具体实现类：针对不同底层的通用接口实现</p>
<h3 id="桥接模式优缺点"><a href="#桥接模式优缺点" class="headerlink" title="桥接模式优缺点"></a>桥接模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li><p>你可以创建与平台无关的类和程序</p>
</li>
<li><p>客户端代码仅与高层抽象部分互动， 不接触到平台详细信息</p>
</li>
<li><p>开闭原则，可以新增抽象和实现， 且它们之间互不影响</p>
</li>
<li><p>单一职责原则，抽象专注高层逻辑， 实现部分处理平台细节</p>
</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>对高内聚的类使用该模式可能会让代码更加复杂</li>
</ul>
<h3 id="桥接模式实现代码"><a href="#桥接模式实现代码" class="headerlink" title="桥接模式实现代码"></a>桥接模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//颜色类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">color</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fillcolor</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//红色</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">red</span> :<span class="keyword">public</span> color</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">red</span>() :<span class="built_in">colors</span>(<span class="string">&quot;红色&quot;</span>) &#123;&#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">fillcolor</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\t颜色：\t&quot;</span> &lt;&lt; colors&lt;&lt;<span class="string">&quot; \n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  string colors;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//绿色</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">green</span>:<span class="keyword">public</span> color</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">green</span>():<span class="built_in">colors</span>(<span class="string">&quot;绿色&quot;</span>) &#123;&#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">fillcolor</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\t颜色：\t&quot;</span> &lt;&lt; colors &lt;&lt; <span class="string">&quot; \n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  string colors;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//形状</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ShowShape</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetColor</span><span class="params">(color* color)</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DrawShape</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DrawColor</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">  color* colors;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//圆</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">circle</span>:<span class="keyword">public</span> Shape</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">circle</span>() :<span class="built_in">shape</span>(<span class="string">&quot;圆&quot;</span>) &#123;&#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">ShowShape</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">DrawShape</span>();</span><br><span class="line">    <span class="built_in">DrawColor</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">SetColor</span><span class="params">(color* colors)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;colors = colors;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">DrawShape</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;形状：\t&quot;</span> &lt;&lt; shape;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">DrawColor</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;colors-&gt;<span class="built_in">fillcolor</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  string shape;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//正方形</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">square</span> :<span class="keyword">public</span> Shape</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">square</span>() :<span class="built_in">shape</span>(<span class="string">&quot;正方形&quot;</span>) &#123;&#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">ShowShape</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">DrawShape</span>();</span><br><span class="line">    <span class="built_in">DrawColor</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">SetColor</span><span class="params">(color* colors)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;colors = colors;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">DrawShape</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;形状：\t&quot;</span> &lt;&lt; shape;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">DrawColor</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;colors-&gt;<span class="built_in">fillcolor</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  string shape;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//创造一个红正方形</span></span><br><span class="line">  Shape* s = <span class="keyword">new</span> square;</span><br><span class="line">  s-&gt;<span class="built_in">SetColor</span>(<span class="keyword">new</span> red);</span><br><span class="line">  s-&gt;<span class="built_in">ShowShape</span>();</span><br><span class="line">  <span class="comment">//创造一个绿圆</span></span><br><span class="line">  Shape* t = <span class="keyword">new</span> circle;</span><br><span class="line">  t-&gt;<span class="built_in">SetColor</span>(<span class="keyword">new</span> green);</span><br><span class="line">  t-&gt;<span class="built_in">ShowShape</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h2><h3 id="什么是外观模式"><a href="#什么是外观模式" class="headerlink" title="什么是外观模式"></a>什么是外观模式</h3><p><strong>外观模式</strong>是一种结构型设计模式， 能为程序库、 框架或其他复杂类提供一个简单的接口</p>
<h3 id="为什么使用外观模式"><a href="#为什么使用外观模式" class="headerlink" title="为什么使用外观模式"></a>为什么使用外观模式</h3><p>外观类为包含许多活动部件的复杂子系统提供一个简单的接口。 与直接调用子系统相比， 外观提供的功能可能比较有限， 但它却包含了客户端真正关心的功能。如果你的程序需要与包含几十种功能的复杂库整合， 但只需使用其中非常少的功能， 那么使用外观模式会非常方便。</p>
<h3 id="外观模式实现步骤"><a href="#外观模式实现步骤" class="headerlink" title="外观模式实现步骤"></a>外观模式实现步骤</h3><p>1.提供一个外观类:为调用方, 定义简单的调用接口</p>
<p>2.提供一个调用者类:通过外观类接口调用提供某功能的内部类群</p>
<p>3.多个功能提供者类:提供功能的类群（模块或子系统）</p>
<h3 id="外观模式优缺点"><a href="#外观模式优缺点" class="headerlink" title="外观模式优缺点"></a>外观模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>你可以让自己的代码独立于复杂子系统</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>外观可能成为与程序中所有类都耦合的上帝对象(了解过多或者负责过多的对象)</li>
</ul>
<h3 id="外观模式实现代码"><a href="#外观模式实现代码" class="headerlink" title="外观模式实现代码"></a>外观模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//多个工作类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">one</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">dis</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序一运行中.....\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">two</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">dis</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序二运行中.....\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">three</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">dis</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序三运行中.....\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">four</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">dis</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序四运行中.....\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">face</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">dis</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    one q;</span><br><span class="line">    two w;</span><br><span class="line">    three e;</span><br><span class="line">    four r;</span><br><span class="line">    q.<span class="built_in">dis</span>();</span><br><span class="line">    w.<span class="built_in">dis</span>();</span><br><span class="line">    e.<span class="built_in">dis</span>();</span><br><span class="line">    r.<span class="built_in">dis</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;各个程序正在运行&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  face* s = <span class="keyword">new</span> face;</span><br><span class="line">  s-&gt;<span class="built_in">dis</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h2><h3 id="什么是享元模式"><a href="#什么是享元模式" class="headerlink" title="什么是享元模式"></a>什么是享元模式</h3><p><strong>享元模式</strong>是一种结构型设计模式， 它摒弃了在每个对象中保存所有数据的方式， 通过共享多个对象所共有的相同状态， 让你能在有限的内存容量中载入更多对象。</p>
<h3 id="为什么使用享元模式"><a href="#为什么使用享元模式" class="headerlink" title="为什么使用享元模式"></a>为什么使用享元模式</h3><p>通过复用相同的对象来减少对象的创建数量，创建更小的对象组，并通过共享实现重用。通过归类，将对象的属性分为内蕴状态和外蕴状态。</p>
<p>外蕴状态是对象的外部描述，是每个对象的可变部分，比如对工具的使用地点、使用时间、使用人、工作内容的描述，这些属性不属于对象本身，而是根据每回使用情况进行变化的，这就需要制作成接口进行外部调用，而外蕴状态的维护是由调用者维护的，对象内不进行维护。</p>
<h3 id="享元模式实现步骤"><a href="#享元模式实现步骤" class="headerlink" title="享元模式实现步骤"></a>享元模式实现步骤</h3><p>1.提供一个抽象享元角色类:具体享元类的父类，规定一些需要实现的公共接口</p>
<p>2.提供一个或者多个具体享元角色:实现了抽象享元角色规定的方法</p>
<p>3.提供一个享元工厂角色类:负责创建和管理享元角色</p>
<h3 id="享元模式优缺点"><a href="#享元模式优缺点" class="headerlink" title="享元模式优缺点"></a>享元模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>如果程序中有很多相似对象， 那么你将可以节省大量内存。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>你可能需要牺牲执行速度来换取内存， 因为他人每次调用享元方法时都需要重新计算部分情景数据。</li>
<li>代码会变得更加复杂。</li>
</ul>
<h3 id="享元模式实现代码"><a href="#享元模式实现代码" class="headerlink" title="享元模式实现代码"></a>享元模式实现代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;initializer_list&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//以车库提车为例</span></span><br><span class="line"><span class="comment">//共享信息</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SharedState</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  SharedState(<span class="type">const</span> <span class="built_in">string</span>&amp; p, <span class="type">const</span> <span class="built_in">string</span>&amp; x, <span class="type">const</span> <span class="built_in">string</span>&amp; c):pinpai(p),xinghao(x),color(c)&#123;&#125;</span><br><span class="line">  <span class="built_in">string</span> <span class="title function_">getpinpai</span><span class="params">()</span> &#123; <span class="keyword">return</span> pinpai; &#125;</span><br><span class="line">  <span class="built_in">string</span> <span class="title function_">getxinghao</span><span class="params">()</span> &#123; <span class="keyword">return</span> xinghao; &#125;</span><br><span class="line">  <span class="built_in">string</span> <span class="title function_">getcolor</span><span class="params">()</span> &#123; <span class="keyword">return</span> color; &#125;</span><br><span class="line">  friend ostream&amp; operator&lt;&lt;(ostream&amp; out, SharedState t)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> out &lt;&lt; t.pinpai &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; t.xinghao &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; t.color;</span><br><span class="line">  &#125;</span><br><span class="line">private:</span><br><span class="line">  <span class="built_in">string</span> pinpai;<span class="comment">//品牌</span></span><br><span class="line">  <span class="built_in">string</span> xinghao;<span class="comment">//型号</span></span><br><span class="line">  <span class="built_in">string</span> color;<span class="comment">//颜色</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//非共享信息</span></span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">UniqueState</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  UniqueState(<span class="type">const</span> <span class="built_in">string</span> cz,<span class="type">const</span> <span class="built_in">string</span> cp):chezhu(cz),chepai(cp)&#123;&#125;</span><br><span class="line">  <span class="built_in">string</span> <span class="title function_">getchezhu</span><span class="params">()</span> &#123; <span class="keyword">return</span> chezhu; &#125;</span><br><span class="line">  <span class="built_in">string</span> <span class="title function_">getchepai</span><span class="params">()</span> &#123; <span class="keyword">return</span> chepai; &#125;</span><br><span class="line">  friend ostream&amp; operator&lt;&lt;(ostream&amp; out, UniqueState t)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> out &lt;&lt; t.chezhu &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; t.chepai;</span><br><span class="line">  &#125;</span><br><span class="line">private:</span><br><span class="line">  <span class="built_in">string</span> chezhu;<span class="comment">//车主</span></span><br><span class="line">  <span class="built_in">string</span> chepai;<span class="comment">//车牌</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//信息节点</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">private:</span><br><span class="line">  SharedState* s;</span><br><span class="line">public:</span><br><span class="line">  node(<span class="type">const</span> SharedState* t):s(new SharedState(*t))&#123;&#125;<span class="comment">//浅拷贝，使用类默认的拷贝构造即可</span></span><br><span class="line">  node(<span class="type">const</span> node* t):s(new SharedState(*(t-&gt;s)))&#123;&#125;</span><br><span class="line">  SharedState* <span class="title function_">getsharedstate</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//输出信息</span></span><br><span class="line">  <span class="type">void</span> <span class="title function_">show</span><span class="params">(<span class="type">const</span> UniqueState&amp; p)</span><span class="type">const</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;共享信息：&quot;</span>&lt;&lt;s&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;私有信息：&quot;</span> &lt;&lt;p &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//综合管理</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">management</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">  management(<span class="built_in">initializer_list</span>&lt;SharedState&gt; sh)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> y:sh)</span><br><span class="line">    &#123;</span><br><span class="line">      this-&gt;s.insert(<span class="built_in">make_pair</span>&lt;<span class="built_in">string</span>, node&gt;(this-&gt;getkay(y), node(&amp;y)));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//找到车型</span></span><br><span class="line">  node <span class="title function_">findcar</span><span class="params">(<span class="type">const</span> SharedState&amp; t)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (this-&gt;s.find(getkay(t))==this-&gt;s.end())</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;未找到车型\n&quot;</span>;</span><br><span class="line">        s.insert(<span class="built_in">make_pair</span>&lt;<span class="built_in">string</span>, node&gt;(this-&gt;getkay(t), node(&amp;t)));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;找到车型\n&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> this-&gt;s.at(getkay(t));</span><br><span class="line">  &#125;</span><br><span class="line">private:</span><br><span class="line">  <span class="built_in">map</span>&lt;<span class="built_in">string</span>, node&gt; s;</span><br><span class="line">  <span class="built_in">string</span> <span class="title function_">getkay</span><span class="params">(SharedState t)</span><span class="comment">//得到键值</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> t.getpinpai() + <span class="string">&quot;_&quot;</span> + t.getxinghao() + <span class="string">&quot;_&quot;</span> + t.getcolor();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">AddCarToPoliceDataBase</span><span class="params">(management&amp; ff,  <span class="type">const</span> <span class="built_in">string</span>&amp; plates, <span class="type">const</span> <span class="built_in">string</span>&amp; ower,</span></span><br><span class="line"><span class="params">  <span class="type">const</span> <span class="built_in">string</span>&amp; brand, <span class="type">const</span> <span class="built_in">string</span>&amp; model, <span class="type">const</span> <span class="built_in">string</span>&amp; color)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;车型匹配结果:&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="type">const</span> node&amp; flyweight = ff.findcar(&#123; brand,model,color &#125;);</span><br><span class="line">  flyweight.show(&#123; ower,plates&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  management* factory = new  management(</span><br><span class="line">    &#123; &#123;<span class="string">&quot;雪佛兰&quot;</span>, <span class="string">&quot;Camaro2020&quot;</span>, <span class="string">&quot;pink&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;奔驰&quot;</span>, <span class="string">&quot;C43&quot;</span>, <span class="string">&quot;black&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;奔驰&quot;</span>, <span class="string">&quot;C63&quot;</span>, <span class="string">&quot;red&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;宝马&quot;</span>, <span class="string">&quot;M6&quot;</span>, <span class="string">&quot;red&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;宝马&quot;</span>, <span class="string">&quot;X7&quot;</span>, <span class="string">&quot;white&quot;</span>&#125; &#125;);</span><br><span class="line">  AddCarToPoliceDataBase(*factory,</span><br><span class="line">    <span class="string">&quot;DK88888&quot;</span>,</span><br><span class="line">    <span class="string">&quot;顽石&quot;</span>,</span><br><span class="line">    <span class="string">&quot;宝马&quot;</span>,</span><br><span class="line">    <span class="string">&quot;M6&quot;</span>,</span><br><span class="line">    <span class="string">&quot;red&quot;</span>);</span><br><span class="line">  AddCarToPoliceDataBase(*factory,</span><br><span class="line">    <span class="string">&quot;DK66666&quot;</span>,</span><br><span class="line">    <span class="string">&quot;里奇&quot;</span>,</span><br><span class="line">    <span class="string">&quot;宝马&quot;</span>,</span><br><span class="line">    <span class="string">&quot;X7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;red&quot;</span>);</span><br><span class="line">  delete factory;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h2><h3 id="什么是组合模式"><a href="#什么是组合模式" class="headerlink" title="什么是组合模式"></a>什么是组合模式</h3><p><strong>组合模式</strong>是一种结构型设计模式， 你可以使用它将对象组合成树状结构， 并且能像使用独立对象一样使用它们。</p>
<h3 id="为什么使用组合模式"><a href="#为什么使用组合模式" class="headerlink" title="为什么使用组合模式"></a>为什么使用组合模式</h3><p>组合模式为你提供了两种共享公共接口的基本元素类型： 简单叶节点和复杂容器。 容器中可以包含叶节点和其他容器。 这使得你可以构建树状嵌套递归对象结构。果你希望客户端代码以相同方式处理简单和复杂元素， 可以使用该模式。 组合模式中定义的所有元素共用同一个接口。 在这一接口的帮助下， 客户端不必在意其所使用的对象的具体类。</p>
<h3 id="组合模式实现步骤"><a href="#组合模式实现步骤" class="headerlink" title="组合模式实现步骤"></a>组合模式实现步骤</h3><p>1.提供一个组件类：描述复杂元素的通用接口和方法</p>
<p>2.创建一个叶子节点类：描述简单元素</p>
<p>3.提供一个容器类：表示复杂元素</p>
<p>4.容器类中定义添加和删除子元素的方法</p>
<h3 id="组合模式优缺点"><a href="#组合模式优缺点" class="headerlink" title="组合模式优缺点"></a>组合模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>你可以利用多态和递归机制更方便地使用复杂树结构。</li>
<li>开闭原则。 无需更改现有代码， 你就可以在应用中添加新元素， 使其成为对象树的一部分。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>对于功能差异较大的类， 提供公共接口或许会有困难。 </li>
<li>在一些特定情况下，可以存在过度一般化组件接口， 使其变得令人难以理解。</li>
</ul>
<h3 id="组合模式实现代码"><a href="#组合模式实现代码" class="headerlink" title="组合模式实现代码"></a>组合模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Root</span><span class="comment">//虚拟类</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">add</span><span class="params">(Root* p)</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Remove</span><span class="params">(Root* p)</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> list&lt;Root*&gt; <span class="title">Getchild</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">File</span> :<span class="keyword">public</span> Root<span class="comment">//文件位置</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">File</span>(string name) :<span class="built_in">name</span>(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(Root* p)</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Remove</span><span class="params">(Root* p)</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function">list&lt;Root*&gt; <span class="title">Getchild</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> s; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	list&lt;Root*&gt; s;</span><br><span class="line">	string name;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">floder</span> :<span class="keyword">public</span> Root<span class="comment">//文件夹位置</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">floder</span>(string name) :<span class="built_in">name</span>(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showname</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(Root* p)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		s.<span class="built_in">push_back</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Remove</span><span class="params">(Root* p)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		s.<span class="built_in">remove</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">list&lt;Root*&gt; <span class="title">Getchild</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> s; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string name;</span><br><span class="line">	list&lt;Root*&gt; s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//统一接口</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UsShow</span><span class="params">(Root* t, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	list&lt;Root* &gt;root;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;/&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	t-&gt;<span class="built_in">showname</span>();</span><br><span class="line">	root = t-&gt;<span class="built_in">Getchild</span>();</span><br><span class="line">	<span class="keyword">if</span> (!root.<span class="built_in">empty</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> v : root)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (v-&gt;<span class="built_in">Getchild</span>().<span class="built_in">empty</span>())</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					cout &lt;&lt; <span class="string">&quot;/&quot;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				v-&gt;<span class="built_in">showname</span>();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; endl;</span><br><span class="line">				<span class="built_in">UsShow</span>(v, n + <span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	floder* root = <span class="keyword">new</span> <span class="built_in">floder</span>(<span class="string">&quot;C:&quot;</span>);</span><br><span class="line">	floder* D1 = <span class="keyword">new</span> <span class="built_in">floder</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">	File* T1 = <span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">&quot;TEXT1.txt&quot;</span>);</span><br><span class="line">	floder* D2 = <span class="keyword">new</span> <span class="built_in">floder</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">	File* T2 = <span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">&quot;TEXT2.txt&quot;</span>);</span><br><span class="line">	root-&gt;<span class="built_in">add</span>(D1);</span><br><span class="line">	root-&gt;<span class="built_in">add</span>(D2);</span><br><span class="line">	D1-&gt;<span class="built_in">add</span>(T1);</span><br><span class="line">	D2-&gt;<span class="built_in">add</span>(T2);</span><br><span class="line">	<span class="built_in">UsShow</span>(root, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="模板模式"><a href="#模板模式" class="headerlink" title="模板模式"></a>模板模式</h2><h3 id="什么是模板模式"><a href="#什么是模板模式" class="headerlink" title="什么是模板模式"></a>什么是模板模式</h3><p>模板方法是一种行为设计模式， 它在基类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤。</p>
<h3 id="为什么使用模板模式"><a href="#为什么使用模板模式" class="headerlink" title="为什么使用模板模式"></a>为什么使用模板模式</h3><p>在抽象类中统一操作步骤，并规定好接口，让子类实现接口。这样可以把各个具体的子类和操作步骤解耦合。你只希望客户端扩展某个特定算法步骤，而不是整个算法或其结构时，可使用模板方法模式。当多个类的算法除一些细微不同之外几乎完全一样时， 你可使用该模式。但其后果就是，只要算法发生变化， 你就可能需要修改所有的类。</p>
<h3 id="模板模式实现步骤"><a href="#模板模式实现步骤" class="headerlink" title="模板模式实现步骤"></a>模板模式实现步骤</h3><p>1.提供一个抽象类：负责规定好接口，让子类实现接口，定义一个模板方法</p>
<p>2.提供具体实现子类:实现抽象类的抽象接口即可</p>
<h3 id="模板模式优缺点"><a href="#模板模式优缺点" class="headerlink" title="模板模式优缺点"></a>模板模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>你可仅允许客户端重写一个大型算法中的特定部分， 使得算法其他部分修改对其所造成的影响减小</li>
<li>你可将重复代码提取到一个超类中</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>部分客户端可能会受到算法框架的限制</li>
<li>通过子类抑制默认步骤实现可能会导致违反里氏替换原则</li>
<li>模板方法中的步骤越多， 其维护工作就可能会越困难</li>
</ul>
<h3 id="模板模式实现代码"><a href="#模板模式实现代码" class="headerlink" title="模板模式实现代码"></a>模板模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">basics</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">head</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">body</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">clothes</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">all</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">head</span>();</span><br><span class="line">		<span class="built_in">body</span>();</span><br><span class="line">		<span class="built_in">clothes</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">one</span> :<span class="keyword">public</span> basics</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">head</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;长发 &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">body</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;微胖 &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">clothes</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;长裙&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">two</span> :<span class="keyword">public</span> basics</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">head</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;偏分 &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">body</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;有腹肌 &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">clothes</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;西服&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	basics* a = <span class="keyword">new</span> one;</span><br><span class="line">	basics* b = <span class="keyword">new</span> two;</span><br><span class="line">	a-&gt;<span class="built_in">all</span>();</span><br><span class="line">	b-&gt;<span class="built_in">all</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><h3 id="什么是命令模式"><a href="#什么是命令模式" class="headerlink" title="什么是命令模式"></a>什么是命令模式</h3><p>命令模式是一种行为设计模式， 它可将请求转换为一个包含与请求相关的所有信息的独立对象。 该转换让你能根据不同的请求将方法参数化、 延迟请求执行或将其放入队列中， 且能实现可撤销操作。</p>
<h3 id="为什么使用命令模式"><a href="#为什么使用命令模式" class="headerlink" title="为什么使用命令模式"></a>为什么使用命令模式</h3><p>在面向对象的程序设计中，一个对象调用另一个对象，整个调用过程比较繁杂，或者存在多处这种调用。这时，使用命令模式对该调用加 以封装，便于功能的再利用。命令模式可将特定的方法调用转化为独立对象。 这一改变也带来了许多有趣的应用： 你可以将命令作为方法的参数进行传递、 将命令保存在其他对象中， 或者在运行时切换已连接的命令等。同其他对象一样， 命令也可以实现序列化 （序列化的意思是转化为字符串）， 从而能方便地写入文件或数据库中。 一段时间后， 该字符串可被恢复成为最初的命令对象。 因此， 你可以延迟或计划命令的执行。 但其功能远不止如此！ 使用同样的方式， 你还可以将命令放入队列、 记录命令或者通过网络发送命令。</p>
<h3 id="命令模式实现步骤"><a href="#命令模式实现步骤" class="headerlink" title="命令模式实现步骤"></a>命令模式实现步骤</h3><p>1.声明仅有一个执行方法的命令抽象类</p>
<p>2.抽取请求并使之成为实现命令接口的具体命令类</p>
<p>3.找到担任发送者职责的类</p>
<p>4.修改发送者使其执行命令， 而非直接将请求发送给接收者</p>
<p>5.客户端必须按照以下顺序来初始化对象</p>
<ul>
<li>创建接收者。</li>
<li>创建命令， 如有需要可将其关联至接收者。</li>
<li>创建发送者并将其与特定命令关联。</li>
</ul>
<h3 id="命令模式优缺点"><a href="#命令模式优缺点" class="headerlink" title="命令模式优缺点"></a>命令模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>单一职责原则:你可以解耦触发和执行操作的类</li>
<li>开闭原则:你可以在不修改已有客户端代码的情况下在程序中创建新的命令</li>
<li>你可以实现撤销和恢复功能</li>
<li>你可以实现操作的延迟执行</li>
<li>你可以将一组简单命令组合成一个复杂命令</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>代码可能会变得更加复杂， 因为你在发送者和接收者之间增加了一个全新的层次</li>
</ul>
<h3 id="命令模式实现代码"><a href="#命令模式实现代码" class="headerlink" title="命令模式实现代码"></a>命令模式实现代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//以餐厅为例</span></span><br><span class="line"><span class="comment">//厨师</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cooker</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">	<span class="type">void</span> <span class="title function_">cook_unique_technique</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;辣子鸡一份\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">cook_specialty_dish</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;九转大肠一份\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象命令</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">order</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">	order(cooker* s):p(s)&#123;&#125;</span><br><span class="line">	virtual <span class="type">void</span> <span class="title function_">cook</span><span class="params">()</span> = <span class="number">0</span>;</span><br><span class="line">	virtual <span class="type">void</span> <span class="title function_">nocook</span><span class="params">()</span> = <span class="number">0</span>;</span><br><span class="line">protected:</span><br><span class="line">	cooker* p;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体命令1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">order1</span>:</span>public order</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	order1(cooker* s) :order(s) &#123;&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">cook</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		p-&gt;cook_specialty_dish();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">nocook</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;取消厨师拿手菜\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体命令2</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">order2</span> :</span>public order</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	order2(cooker* s) :order(s) &#123;&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">cook</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		p-&gt;cook_unique_technique();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">nocook</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;取消本店招牌菜\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//点菜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">order_dishes</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">	<span class="type">void</span> <span class="title function_">setOder</span><span class="params">(order* s)</span></span><br><span class="line">	&#123;</span><br><span class="line">		s-&gt;cook();</span><br><span class="line">		l.push_back(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">unOder</span><span class="params">(order* s)</span></span><br><span class="line">	&#123;</span><br><span class="line">		s-&gt;nocook();</span><br><span class="line">		l.remove(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">in_all</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> s : l)</span><br><span class="line">		&#123;</span><br><span class="line">			s-&gt;cook();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">	<span class="built_in">list</span>&lt;order*&gt; l;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	cooker* a = new cooker;</span><br><span class="line">	order* s = new order1(a);</span><br><span class="line">	order* d = new order2(a);</span><br><span class="line">	order_dishes* e = new order_dishes;</span><br><span class="line"></span><br><span class="line">	e-&gt;setOder(s);</span><br><span class="line">	e-&gt;unOder(s);</span><br><span class="line">	e-&gt;setOder(d);</span><br><span class="line"></span><br><span class="line">	e-&gt;in_all();</span><br><span class="line">	e-&gt;setOder(s);</span><br><span class="line">	e-&gt;in_all();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h2><h3 id="什么是责任链模式"><a href="#什么是责任链模式" class="headerlink" title="什么是责任链模式"></a>什么是责任链模式</h3><p>责任链模式是一种行为设计模式， 允许你将请求沿着处理者链进行发送。 收到请求后， 每个处理者均可对请求进行处理， 或将其传递给链上的下个处理者。比如有三个项目经理，顺序是A-&gt;B-&gt;C，把所有的项目都先传递给A，A拿到所有的项目后，把属于自己负责的项目留下来，把剩下的传递给B，然后B把属于自己的留下来，把不属于自己的再传递给C。</p>
<h3 id="为什么使用责任链模式"><a href="#为什么使用责任链模式" class="headerlink" title="为什么使用责任链模式"></a>为什么使用责任链模式</h3><p>该模式能将多个处理者连接成一条链。 接收到请求后， 它会 “询问” 每个处理者是否能够对其进行处理。 这样所有处理者都有机会来处理请求。 无论你以何种顺序将处理者连接成一条链， 所有请求都会严格按照顺序通过链上的处理者。如果在处理者类中有对引用成员变量的设定方法， 你将能动态地插入和移除处理者， 或者改变其顺序。总的来说链条式处理事情。工作流程化、消息处理流程化、事物流程化。</p>
<h3 id="责任链模式实现步骤"><a href="#责任链模式实现步骤" class="headerlink" title="责任链模式实现步骤"></a>责任链模式实现步骤</h3><p>1.提供处理类的抽象父类:抽象客户端如何将请求数据传递给方法</p>
<p>2.依次创建具体处理者子类并实现其处理方法</p>
<ul>
<li>是否自行处理这个请求</li>
<li>是否将该请求沿着链进行传递</li>
</ul>
<p>3.客户端处理链(组装链+触发处理者)，客户端需要准备好处理以下情况：</p>
<ul>
<li><p>链中可能只有单个链接</p>
</li>
<li><p>部分请求可能无法到达链尾</p>
</li>
<li><p>其他请求可能直到链尾都未被处理</p>
</li>
</ul>
<h3 id="责任链模式优缺点"><a href="#责任链模式优缺点" class="headerlink" title="责任链模式优缺点"></a>责任链模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>你可以控制请求处理的顺序</li>
<li>单一职责原则: 你可对发起操作和执行操作的类进行解耦</li>
<li>开闭原则:你可以在不更改现有代码的情况下在程序中新增处理者</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>部分请求可能未被处理</li>
</ul>
<h3 id="责任链模式实现代码"><a href="#责任链模式实现代码" class="headerlink" title="责任链模式实现代码"></a>责任链模式实现代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//以上班请假为例</span></span><br><span class="line"><span class="comment">//抽象类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">lead</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">	lead():next(nullptr)&#123;&#125;</span><br><span class="line">	<span class="comment">//组织链函数</span></span><br><span class="line">	<span class="type">void</span> <span class="title function_">nexthr</span><span class="params">(lead* s)</span></span><br><span class="line">	&#123;</span><br><span class="line">		next = s;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//向领导请假</span></span><br><span class="line">	virtual <span class="type">void</span> <span class="title function_">leave</span><span class="params">(<span class="type">int</span> day)</span> = <span class="number">0</span>;</span><br><span class="line">protected:</span><br><span class="line">	lead* next;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//主管</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">hr</span> :</span>public lead</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	<span class="type">void</span> <span class="title function_">leave</span><span class="params">(<span class="type">int</span> day)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;主管说：&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (day &lt;= <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;可以\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;天数太长，找经理\n&quot;</span>;</span><br><span class="line">			next-&gt;leave(day);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//经理</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">manager</span> :</span>public lead</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	<span class="type">void</span> <span class="title function_">leave</span><span class="params">(<span class="type">int</span> day)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;经理说：&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (day &lt;= <span class="number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;可以\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;天数太长，找老板\n&quot;</span>;</span><br><span class="line">			next-&gt;leave(day);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//老板</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">boss</span> :</span>public lead</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	<span class="type">void</span> <span class="title function_">leave</span><span class="params">(<span class="type">int</span> day)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;老板说：&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (day &lt;= <span class="number">30</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;可以\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;天数太长，不予批准\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	lead* a = new hr;</span><br><span class="line">	lead* s = new manager;</span><br><span class="line">	lead* d = new boss;</span><br><span class="line">	<span class="comment">//组装链</span></span><br><span class="line">	a-&gt;nexthr(s);</span><br><span class="line">	s-&gt;nexthr(d);</span><br><span class="line"></span><br><span class="line">	a-&gt;leave(<span class="number">10</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><h3 id="什么是策略模式"><a href="#什么是策略模式" class="headerlink" title="什么是策略模式"></a>什么是策略模式</h3><p>策略模式是一种行为设计模式， 它能让你定义一系列算法， 并将每种算法分别放入独立的类中， 以使算法的对象能够相互替换</p>
<h3 id="为什么使用策略模式"><a href="#为什么使用策略模式" class="headerlink" title="为什么使用策略模式"></a>为什么使用策略模式</h3><p>策略模式让你能够将对象关联至可以不同方式执行特定子任务的不同子对象， 从而以间接方式在运行时更改对象行为。策略模式让你能将不同行为抽取到一个独立类层次结构中， 并将原始类组合成同一个， 从而减少重复代码。策略模式让你能将各种算法的代码、 内部数据和依赖关系与其他代码隔离开来。 不同客户端可通过一个简单接口执行算法， 并能在运行时进行切换。策略模式将所有继承自同样接口的算法抽取到独立类中， 因此不再需要条件语句。 原始对象并不实现所有算法的变体， 而是将执行工作委派给其中的一个独立算法对象。从而解决在同一算法的不同变体中切换时避免使用多重条件判断。</p>
<h3 id="策略模式实现步骤"><a href="#策略模式实现步骤" class="headerlink" title="策略模式实现步骤"></a>策略模式实现步骤</h3><p>1.提供一个抽象策略类：定义抽象的函数算法让继承的子类实现</p>
<p>2.提供具体策略类:封装了继续相关的算法和行为，即函数的具体功能的实现</p>
<p>3.提供一个策略的容器类：根据不同策略执行不同的行为，策略由外部 环境决定</p>
<h3 id="策略模式优缺点"><a href="#策略模式优缺点" class="headerlink" title="策略模式优缺点"></a>策略模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>你可以在运行时切换对象内的算法</li>
<li>你可以将算法的实现和使用算法的代码隔离开来</li>
<li>你可以使用组合来代替继承</li>
<li>开闭原则：你无需对上下文进行修改就能够引入新的策略</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>如果你的算法极少发生改变， 那么没有任何理由引入新的类和接口。 使用该模式只会让程序过于复杂</li>
<li>客户端必须知晓策略间的不同——它需要选择合适的策略</li>
<li>借助额外的类和接口可能会让代码不够简洁</li>
</ul>
<h3 id="策略模式实现代码"><a href="#策略模式实现代码" class="headerlink" title="策略模式实现代码"></a>策略模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//以计算器为例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">calculator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">ex</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">add</span> :<span class="keyword">public</span> calculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">ex</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">cc</span> :<span class="keyword">public</span> calculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">ex</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(b!=<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> a / b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sub</span> :<span class="keyword">public</span> calculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">ex</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a - b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ee</span> :<span class="keyword">public</span> calculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">ex</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a * b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ll</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(calculator* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;s = s;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">calculate</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; s-&gt;<span class="built_in">ex</span>(a, b) &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	calculator* s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ll* s = <span class="keyword">new</span> ll;</span><br><span class="line">	<span class="type">int</span> a, b;</span><br><span class="line">	<span class="type">char</span> c;</span><br><span class="line">	cin &gt;&gt; a &gt;&gt; c &gt;&gt; b;</span><br><span class="line">	<span class="keyword">switch</span> (c)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">		s-&gt;<span class="built_in">set</span>(<span class="keyword">new</span> add);</span><br><span class="line">		s-&gt;<span class="built_in">calculate</span>(a, b);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">		s-&gt;<span class="built_in">set</span>(<span class="keyword">new</span> sub);</span><br><span class="line">		s-&gt;<span class="built_in">calculate</span>(a, b);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">		s-&gt;<span class="built_in">set</span>(<span class="keyword">new</span> ee);</span><br><span class="line">		s-&gt;<span class="built_in">calculate</span>(a, b);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">		s-&gt;<span class="built_in">set</span>(<span class="keyword">new</span> cc);</span><br><span class="line">		s-&gt;<span class="built_in">calculate</span>(a, b);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h2><h3 id="什么是观察者模式"><a href="#什么是观察者模式" class="headerlink" title="什么是观察者模式"></a>什么是观察者模式</h3><p>观察者模式是行为模式之一，它的作用是当一个对象的状态发生变化时，能够自动通知其 他关联对象，自动刷新对象状态</p>
<h3 id="为什么使用观察者模式"><a href="#为什么使用观察者模式" class="headerlink" title="为什么使用观察者模式"></a>为什么使用观察者模式</h3><p>当一个对象状态的改变需要改变其他对象， 或实际对象是事先未知的或动态变化的时，观察者模式适合描述此类问题。当应用中的一些对象必须观察其他对象时，可使用该模式，但仅能在有限时间内或特定情况下使用。</p>
<h3 id="观察者模式实现步骤"><a href="#观察者模式实现步骤" class="headerlink" title="观察者模式实现步骤"></a>观察者模式实现步骤</h3><p>1.提供一个抽象目标类：被观察的对象，抽象基本的属性状态及其他操作</p>
<p>2.提供一个具体目标类：被观察的对象对象具体实现</p>
<p>3.提供一个抽象观察者类：抽象观察者的具体的业务逻辑处理</p>
<p>4.提供一个具体观察者类：观察者的具体实现，得到通知后将完成一些具体的业务逻辑处理</p>
<h3 id="观察者模式优缺点"><a href="#观察者模式优缺点" class="headerlink" title="观察者模式优缺点"></a>观察者模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>开闭原则： 你无需修改发布者代码就能引入新的订阅者类 （如果是发布者接口则可轻松引入发布者类）</li>
<li>你可以在运行时建立对象之间的联系</li>
<li>依赖倒置：让耦合的双方都依赖于抽象,而不是依赖于具体</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>被观察者对象有很多的直接和间接的观察者的话，将所有的观察者都通知到会花费很多时间</li>
<li>⼀个被观察者对象有很多的直接和间接的观察者的话，将所有的观察者都通知到会花费很多时间</li>
</ul>
<h3 id="观察者模式实现代码"><a href="#观察者模式实现代码" class="headerlink" title="观察者模式实现代码"></a>观察者模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">boss</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">stuff</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">stuff</span>(string name, boss* a) :<span class="built_in">name</span>(name) &#123; <span class="keyword">this</span>-&gt;a = a; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">cc</span><span class="params">(string dO)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot;观察到：&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span>(dO==<span class="string">&quot;老板在巡视&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt;dO&lt;&lt; <span class="string">&quot;立刻工作&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(dO==<span class="string">&quot;老板走了&quot;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; dO &lt;&lt; <span class="string">&quot;开始摸鱼&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	boss* a;</span><br><span class="line">	string name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">boss</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">seet</span><span class="params">(stuff* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		e.<span class="built_in">push_back</span>(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ee</span><span class="params">(string ss)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> s : e)</span><br><span class="line">		&#123;</span><br><span class="line">			s-&gt;<span class="built_in">cc</span>(ss);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	vector&lt;stuff*&gt; e;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boss* a = <span class="keyword">new</span> boss;</span><br><span class="line">	stuff* s = <span class="keyword">new</span> <span class="built_in">stuff</span>(<span class="string">&quot;一一&quot;</span>,a);</span><br><span class="line">	a-&gt;<span class="built_in">seet</span>(s);</span><br><span class="line">	a-&gt;<span class="built_in">ee</span>(<span class="string">&quot;老板在巡视&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h2><h3 id="什么是访问者模式"><a href="#什么是访问者模式" class="headerlink" title="什么是访问者模式"></a>什么是访问者模式</h3><p>访问者模式是行为模式之一，它分离对象的数据和行为，使用访问者模式模式，可以不修改已有类的情况下，增加新的操作角色和职责</p>
<h3 id="为什么使用访问者模式"><a href="#为什么使用访问者模式" class="headerlink" title="为什么使用访问者模式"></a>为什么使用访问者模式</h3><p>访问者模式通过在访问者对象中为多个目标类提供相同操作的变体， 让你能在属于不同类的一组对象上执行同一操作；访问者模式将所有非主要的行为抽取到一组访问者类中， 使得程序的主要类能更专注于主要的工作；当某个行为仅在类层次结构中的一些类中有意义，而在其他类中没有意义时，你可将该行为抽取到单独的访问者类中， 只需实现接收相关类的对象作为参数的访问者方法并将其他方法留空即可。</p>
<h3 id="访问者模式实现步骤"><a href="#访问者模式实现步骤" class="headerlink" title="访问者模式实现步骤"></a>访问者模式实现步骤</h3><p>1.提供一个抽象访问者类：声明了一个或者多个访问操作，形成所有的具体元素角色必须实现的抽象方法</p>
<p>2.提供一个具体访问者类:实现抽象访问者角色所声明的抽象方法，也就是抽象访问者所声明的各个访问操作</p>
<p>3.提供一个抽象被访问者类:声明一个接受操作，接受一个访问者对象作为一个变量的抽象方法</p>
<p>4.提供一个或多个被访问者类:被访问者的抽象方法的具体实现</p>
<p>5.提供一个结构对象类:可以遍历结构中的所有元素；如果有需要，可提供访问元素接口，元素可设计存储到容器中</p>
<h3 id="访问者模式优缺点"><a href="#访问者模式优缺点" class="headerlink" title="访问者模式优缺点"></a>访问者模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>开闭原则: 你可以引入在不同类对象上执行的新行为， 且无需对这些类做出修改</li>
<li>单一职责原则: 可将同一行为的不同版本移到同一个类中</li>
<li>访问者对象可以在与各种对象交互时收集一些有用的信息</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>每次在元素层次结构中添加或移除一个类时， 你都要更新所有的访问者</li>
<li>在访问者同某个元素进行交互时， 它们可能没有访问元素私有成员变量和方法的必要权限</li>
</ul>
<h3 id="访问者模式实现代码"><a href="#访问者模式实现代码" class="headerlink" title="访问者模式实现代码"></a>访问者模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">scenes</span>;</span><br><span class="line"><span class="comment">//抽象旅客类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Votcer</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">look</span><span class="params">(scenes* s)</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	string name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//抽象场景类-----------要放在前面，否者会报错</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">scenes</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">df</span><span class="params">(Votcer* s)</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function">string <span class="title">getdf</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> dfs; &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	string dfs;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//具体旅客类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">man</span> :<span class="keyword">public</span> Votcer</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">man</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		name = <span class="string">&quot;男生&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">look</span><span class="params">(scenes* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot;在 &quot;</span> &lt;&lt;s-&gt;<span class="built_in">getdf</span>()&lt;&lt; <span class="string">&quot;散步&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">woman</span> :<span class="keyword">public</span> Votcer</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">woman</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		name = <span class="string">&quot;女生&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">look</span><span class="params">(scenes* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot;在 &quot;</span> &lt;&lt; s-&gt;<span class="built_in">getdf</span>() &lt;&lt; <span class="string">&quot;看风景&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体场景类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">lake</span>:<span class="keyword">public</span> scenes</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">lake</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		dfs = <span class="string">&quot;湖&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">df</span><span class="params">(Votcer* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		s-&gt;<span class="built_in">look</span>(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">woods</span> :<span class="keyword">public</span> scenes</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">woods</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		dfs = <span class="string">&quot;小树林&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">df</span><span class="params">(Votcer* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		s-&gt;<span class="built_in">look</span>(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//管理类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">gll</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">seet</span><span class="params">(scenes* b)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		s.<span class="built_in">push_back</span>(b);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ggt</span><span class="params">(Votcer* f)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> v : s)</span><br><span class="line">		&#123;</span><br><span class="line">			v-&gt;<span class="built_in">df</span>(f);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	list&lt;scenes*&gt; s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	gll* s = <span class="keyword">new</span> gll;</span><br><span class="line">	Votcer* a = <span class="keyword">new</span> man;</span><br><span class="line">	Votcer* b = <span class="keyword">new</span> woman;</span><br><span class="line">	scenes* d = <span class="keyword">new</span> lake;</span><br><span class="line">	scenes* w = <span class="keyword">new</span> woods;</span><br><span class="line">	s-&gt;<span class="built_in">seet</span>(d);</span><br><span class="line">	s-&gt;<span class="built_in">seet</span>(w);</span><br><span class="line">	s-&gt;<span class="built_in">ggt</span>(a);</span><br><span class="line">	s-&gt;<span class="built_in">ggt</span>(b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h2><h3 id="什么是中介者模式"><a href="#什么是中介者模式" class="headerlink" title="什么是中介者模式"></a>什么是中介者模式</h3><p>中介者模式是一种行为设计模式， 能让你减少对象之间混乱无序的依赖关系。 该模式会限制对象之间的直接交互， 迫使它们通过一个中介者对象进行合作</p>
<h3 id="为什么使用中介者模式"><a href="#为什么使用中介者模式" class="headerlink" title="为什么使用中介者模式"></a>为什么使用中介者模式</h3><p>该模式让你将对象间的所有关系抽取成为一个单独的类， 以使对于特定组件的修改工作独立于其他组件，由于所有组件间关系都被包含在中介者中， 因此你无需修改组件就能方便地新建中介者类以定义新的组件合作方式。一般来说，大型的软件在开发的过程中会使用模块化的开发方式。但是无论模块之间如何独立，总是会有需要模块间通信的时候，如果模块有很多，且每个模块都向外提供了唯一的接收消息的接口，那么一个模块如果需要与其他所有模块通信，则需要记录其他所有模块的通信接口，同理每个模块都要记录所有与自己相关联的模块的通信接口。首先这就是一件很冗余并降低开发效率的事情，其次，一旦有一天，某个模块修改了自己所提供的通信接口，或者增加了一个新模块，尤其是后者，在公司项目发展过程中是很正常的事情。那么所有模块关于其他模块通信接口的记录可能都需要修改或增加，这在拥有庞大模块数量的项目中，是很恐怖的事情，此时可以考虑中介者模式</p>
<h3 id="中介者模式实现步骤"><a href="#中介者模式实现步骤" class="headerlink" title="中介者模式实现步骤"></a>中介者模式实现步骤</h3><p>1.抽象一个中介者类：定义对象到中介者对象的接口</p>
<p>2.提供一个具体中介者类：实现抽象接口，并且实现关联类数据处理</p>
<p>3.提供一个关联类(同事类)的抽象父类 ：多个关联类之间的交互操作的抽象</p>
<p>4.提供一个或多个具体的关联类(同事类)：实现抽象，通过中介者类完成操作</p>
<h3 id="中介者模式优缺点"><a href="#中介者模式优缺点" class="headerlink" title="中介者模式优缺点"></a>中介者模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>单一职责原则: 你可以将多个组件间的交流抽取到同一位置， 使其更易于理解和维护</li>
<li>开闭原则: 你无需修改实际组件就能增加新的中介者</li>
<li>你可以减轻应用中多个组件间的耦合情况</li>
<li>你可以更方便地复用各个组件</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>一段时间后， 中介者可能会演化成为上帝对象</li>
</ul>
<h3 id="中介者模式实现代码"><a href="#中介者模式实现代码" class="headerlink" title="中介者模式实现代码"></a>中介者模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//三平台通信</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">Message</span></span><br><span class="line">&#123;</span><br><span class="line">	ATW_MESSAGE,		<span class="comment">//移动端到Win</span></span><br><span class="line">	ATM_MESSAGE,		<span class="comment">//移动端到Mac</span></span><br><span class="line">	WTM_MESSAGE,		<span class="comment">//Mac到Win</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractModule</span>;</span><br><span class="line"><span class="comment">//提供转发接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractMediator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Transmit</span><span class="params">(Message message, AbstractModule* pm)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractModule</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">AbstractModule</span>(AbstractMediator* pM) :<span class="built_in">pM</span>(pM) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SendMessage</span><span class="params">(Message message)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		pM-&gt;<span class="built_in">Transmit</span>(message, <span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span>  <span class="title">AcceptMessage</span><span class="params">(Message message)</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	AbstractMediator* pM;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> :<span class="keyword">public</span> AbstractModule</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">App</span>(AbstractMediator* pM) :<span class="built_in">AbstractModule</span>(pM) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span>  <span class="title">AcceptMessage</span><span class="params">(Message message)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (message) </span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> Message::ATM_MESSAGE:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;App to Mac&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> Message::ATW_MESSAGE:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;App to Win&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Win</span> :<span class="keyword">public</span> AbstractModule</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Win</span>(AbstractMediator* pM) :<span class="built_in">AbstractModule</span>(pM) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span>  <span class="title">AcceptMessage</span><span class="params">(Message message)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (message)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> Message::WTM_MESSAGE:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;Win to Mac&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> Message::ATW_MESSAGE:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;App to Win&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mac</span> :<span class="keyword">public</span> AbstractModule </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Mac</span>(AbstractMediator* pM) :<span class="built_in">AbstractModule</span>(pM) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span>  <span class="title">AcceptMessage</span><span class="params">(Message message)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (message)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> Message::WTM_MESSAGE:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;Win to Mac&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> Message::ATM_MESSAGE:</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;App to Mac&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//中介者实现类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteMediator</span> :<span class="keyword">public</span> AbstractMediator </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Transmit</span><span class="params">(Message message, AbstractModule* pM)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (message)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> Message::ATM_MESSAGE:</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//能通过dynamic_cast转换为不为NULL的指针,可确认指针指向的子类类型</span></span><br><span class="line">			App* app = <span class="built_in">dynamic_cast</span>&lt;App*&gt;(pM);</span><br><span class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != app)</span><br><span class="line">			&#123;</span><br><span class="line">				m_mac-&gt;<span class="built_in">AcceptMessage</span>(message);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				app-&gt;<span class="built_in">AcceptMessage</span>(message);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> Message::ATW_MESSAGE: </span><br><span class="line">		&#123;</span><br><span class="line">			App* app = <span class="built_in">dynamic_cast</span>&lt;App*&gt;(pM);</span><br><span class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != app)</span><br><span class="line">			&#123;</span><br><span class="line">				m_win-&gt;<span class="built_in">AcceptMessage</span>(message);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				app-&gt;<span class="built_in">AcceptMessage</span>(message);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> Message::WTM_MESSAGE:</span><br><span class="line">		&#123;</span><br><span class="line">			Win* win = <span class="built_in">dynamic_cast</span>&lt;Win*&gt;(pM);</span><br><span class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != win)</span><br><span class="line">			&#123;</span><br><span class="line">				m_mac-&gt;<span class="built_in">AcceptMessage</span>(message);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				win-&gt;<span class="built_in">AcceptMessage</span>(message);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetModuleApp</span><span class="params">(AbstractModule* app)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_app = app;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetModuleWin</span><span class="params">(AbstractModule* win)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_win = win;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetModuleMac</span><span class="params">(AbstractModule* mac)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;m_mac = mac;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	AbstractModule* m_app=<span class="literal">nullptr</span>;</span><br><span class="line">	AbstractModule* m_win= <span class="literal">nullptr</span>;</span><br><span class="line">	AbstractModule* m_mac= <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	AbstractMediator* pM = <span class="keyword">new</span> ConcreteMediator;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//指定中介者</span></span><br><span class="line">	AbstractModule* app = <span class="keyword">new</span> <span class="built_in">App</span>(pM);</span><br><span class="line">	AbstractModule* win = <span class="keyword">new</span> <span class="built_in">Win</span>(pM);</span><br><span class="line">	AbstractModule* mac = <span class="keyword">new</span> <span class="built_in">Mac</span>(pM);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//为中介者设定模块</span></span><br><span class="line">	ConcreteMediator* pC = <span class="built_in">dynamic_cast</span>&lt;ConcreteMediator*&gt;(pM);</span><br><span class="line">	pC-&gt;<span class="built_in">SetModuleApp</span>(app);</span><br><span class="line">	pC-&gt;<span class="built_in">SetModuleWin</span>(win);</span><br><span class="line">	pC-&gt;<span class="built_in">SetModuleMac</span>(mac);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//模块间通信</span></span><br><span class="line">	app-&gt;<span class="built_in">SendMessage</span>(Message::ATM_MESSAGE);</span><br><span class="line">	app-&gt;<span class="built_in">SendMessage</span>(Message::ATW_MESSAGE);</span><br><span class="line">	win-&gt;<span class="built_in">SendMessage</span>(Message::WTM_MESSAGE);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h2><h3 id="什么是备忘录模式"><a href="#什么是备忘录模式" class="headerlink" title="什么是备忘录模式"></a>什么是备忘录模式</h3><p>备忘录模式是一种行为设计模式， 允许在不暴露对象实现细节的情况下保存和恢复对象之前的状态。（浏览器回退、编辑器撤销与重做、虚拟机生成快照与恢复、游戏悔棋等）</p>
<h3 id="为什么使用备忘录模式"><a href="#为什么使用备忘录模式" class="headerlink" title="为什么使用备忘录模式"></a>为什么使用备忘录模式</h3><p>备忘录模式允许你复制对象中的全部状态 （包括私有成员变量）， 并将其独立于对象进行保存。 尽管大部分人因为 “撤销” 这个用例才记得该模式， 但其实它在处理事务 （比如需要在出现错误时回滚一个操作） 的过程中也必不可少;备忘录让对象自行负责创建其状态的快照。 任何其他对象都不能读取快照， 这有效地保障了数据的安全性</p>
<h3 id="备忘录模式实现步骤"><a href="#备忘录模式实现步骤" class="headerlink" title="备忘录模式实现步骤"></a>备忘录模式实现步骤</h3><p>1.提供一个原生器类：真正要被保存或恢复的对象，其负责创建一个备忘录，可以存储、恢复需要状态信息</p>
<p>2.提供一个备忘录类：用于存储原生器对象的的内部状态，防止外部直接访问原生器对象</p>
<p>3.提供一个管理者类：负责存储备忘录，但不能对备忘录内容进行操作和访问，只能将备忘录传递给其他对象</p>
<h3 id="备忘录模式优缺点"><a href="#备忘录模式优缺点" class="headerlink" title="备忘录模式优缺点"></a>备忘录模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>你可以在不破坏对象封装情况的前提下创建对象状态快照</li>
<li>你可以通过让负责人维护原发器状态历史记录来简化原发器代码</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>如果客户端过于频繁地创建备忘录， 程序将消耗大量内存</li>
<li>负责人必须完整跟踪原发器的生命周期， 这样才能销毁弃用的备忘录</li>
</ul>
<h3 id="备忘录模式实现代码"><a href="#备忘录模式实现代码" class="headerlink" title="备忘录模式实现代码"></a>备忘录模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//象棋为例的下棋退步问题</span></span><br><span class="line"><span class="comment">//原生类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">chess</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">chess</span>(string name,pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; s):<span class="built_in">name</span>(name),<span class="built_in">s</span>(s)&#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setstop</span><span class="params">(string name, pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;s = s;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">string <span class="title">getname</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">getss</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> s;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; name &lt;&lt; <span class="string">&quot;:(&quot;</span> &lt;&lt; s.first &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; s.second &lt;&lt;<span class="string">&quot;)&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	string name;</span><br><span class="line">	pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//备忘录类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Memento</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Memento</span>(string name, pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; s) :<span class="built_in">name</span>(name), <span class="built_in">s</span>(s) &#123;&#125;</span><br><span class="line">	<span class="comment">//保存</span></span><br><span class="line">	<span class="function">chess* <span class="title">saves</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">chess</span>(name, s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//回退</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">backspacing</span><span class="params">(chess* t)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		name = t-&gt;<span class="built_in">getname</span>();</span><br><span class="line">		s = t-&gt;<span class="built_in">getss</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetChess</span><span class="params">(string name, pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; pos)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;s = pos;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	string name;</span><br><span class="line">	pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; s;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//管理类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Caretaker</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//存档</span></span><br><span class="line">	<span class="function"><span class="type">void</span>  <span class="title">AddMento</span><span class="params">(chess* s)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		e.<span class="built_in">push</span>(s);</span><br><span class="line">		s-&gt;<span class="built_in">show</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//获取上一步</span></span><br><span class="line">	<span class="function">chess* <span class="title">GetMemento</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		e.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">return</span> e.<span class="built_in">top</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		e.<span class="built_in">top</span>()-&gt;<span class="built_in">show</span>();</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	stack&lt;chess*&gt; e;</span><br><span class="line">	<span class="type">int</span> stop=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Memento* e = <span class="keyword">new</span> <span class="built_in">Memento</span>(<span class="string">&quot;车&quot;</span>, &#123; <span class="number">4</span>,<span class="number">3</span> &#125;);</span><br><span class="line">	Caretaker* s = <span class="keyword">new</span> Caretaker;</span><br><span class="line">	s-&gt;<span class="built_in">AddMento</span>(e-&gt;<span class="built_in">saves</span>());</span><br><span class="line">	e-&gt;<span class="built_in">SetChess</span>(<span class="string">&quot;马&quot;</span>, &#123; <span class="number">8</span>,<span class="number">8</span> &#125;);</span><br><span class="line">	s-&gt;<span class="built_in">AddMento</span>(e-&gt;<span class="built_in">saves</span>());</span><br><span class="line">	e-&gt;<span class="built_in">SetChess</span>(<span class="string">&quot;炮&quot;</span>, &#123; <span class="number">6</span>,<span class="number">6</span> &#125;);</span><br><span class="line">	s-&gt;<span class="built_in">AddMento</span>(e-&gt;<span class="built_in">saves</span>());</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	s-&gt;<span class="built_in">show</span>();</span><br><span class="line">	s-&gt;<span class="built_in">GetMemento</span>();</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	s-&gt;<span class="built_in">show</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h2><h3 id="什么是状态模式"><a href="#什么是状态模式" class="headerlink" title="什么是状态模式"></a>什么是状态模式</h3><p>状态模式是一种行为设计模式， 让你能在一个对象的内部状态变化时改变其行为， 使其看上去就像改变了自身所属的类一样</p>
<h3 id="为什么使用状态模式"><a href="#为什么使用状态模式" class="headerlink" title="为什么使用状态模式"></a>为什么使用状态模式</h3><p>模式建议你将所有特定于状态的代码抽取到一组独立的类中。 这样一来， 你可以在独立于其他状态的情况下添加新状态或修改已有状态， 从而减少维护成本;状态模式让你能够生成状态类层次结构， 通过将公用代码抽取到抽象基类中来减少重复</p>
<h3 id="状态模式实现步骤"><a href="#状态模式实现步骤" class="headerlink" title="状态模式实现步骤"></a>状态模式实现步骤</h3><p>1.提供一个上下文环境类:抽象一个客户程序需要的接口，将与状态相关的操作委托给当前的具体状态类对象来处理</p>
<p>2.提供一个抽象给状态类：定义一个接口以封装使用上下文环境的的一个特定状态相关的行为</p>
<p>3.提供一个具体状态类:实现抽象状态定义的接口</p>
<h3 id="状态模式优缺点"><a href="#状态模式优缺点" class="headerlink" title="状态模式优缺点"></a>状态模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>单一职责原则: 将与特定状态相关的代码放在单独的类中</li>
<li>开闭原则: 无需修改已有状态类和上下文就能引入新状态</li>
<li>通过消除臃肿的状态机条件语句简化上下文代码</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>如果状态机只有很少的几个状态， 或者很少发生改变， 那么应用该模式可能会显得小题大作</li>
</ul>
<h3 id="状态模式实现代码"><a href="#状态模式实现代码" class="headerlink" title="状态模式实现代码"></a>状态模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractState</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Handle</span><span class="params">(Context* p)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteStateA</span> :<span class="keyword">public</span> AbstractState </span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Handle</span><span class="params">(Context* p)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;A.....&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteStateB</span> :<span class="keyword">public</span> AbstractState</span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Handle</span><span class="params">(Context* p)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;B.....&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Context</span>(AbstractState* pstate) :<span class="built_in">pstate</span>(pstate) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span>  <span class="title">Requst</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (pstate) </span><br><span class="line">		&#123;</span><br><span class="line">			pstate-&gt;<span class="built_in">Handle</span>(<span class="keyword">this</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ChangeState</span><span class="params">(AbstractState* pstate)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;pstate = pstate;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	AbstractState* pstate;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	AbstractState* pA = <span class="keyword">new</span> ConcreteStateA;</span><br><span class="line">	AbstractState* pB = <span class="keyword">new</span> ConcreteStateB;</span><br><span class="line">	Context* pC = <span class="keyword">new</span> <span class="built_in">Context</span>(pA);</span><br><span class="line">	pC-&gt;<span class="built_in">Requst</span>();</span><br><span class="line">	pC-&gt;<span class="built_in">ChangeState</span>(pB);</span><br><span class="line">	pC-&gt;<span class="built_in">Requst</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解释器模式"><a href="#解释器模式" class="headerlink" title="解释器模式"></a>解释器模式</h2><h3 id="什么是解释器模式"><a href="#什么是解释器模式" class="headerlink" title="什么是解释器模式"></a>什么是解释器模式</h3><p>解释器模式是属于行为型模式，它提供了评估语言的语法或表达式的方式，这种模式实现了一个表达式接口，该接口解释一个特定的上下文。这种模式被用在 SQL 解析、符号处理引擎等。</p>
<h3 id="为什么使用解释器模式"><a href="#为什么使用解释器模式" class="headerlink" title="为什么使用解释器模式"></a>为什么使用解释器模式</h3><p>在软件开发中，会遇到有些问题多次重复出现，而且有一定的相似性和规律性。如果将它们归纳成一种简单的语言，那么这些问题实例将是该语言的一些句子，这样就可以用“编译原理”中的解释器模式来实现了。虽然使用解释器模式的实例不是很多，但对于满足以上特点，且对运行效率要求不是很高的应用实例，如果用解释器模式来实现，其效果是非常好的</p>
<h3 id="解释器模式实现步骤"><a href="#解释器模式实现步骤" class="headerlink" title="解释器模式实现步骤"></a>解释器模式实现步骤</h3><p>1.提供一个解释器上下文环境类：用来存储解释器的上下文环境，比如需要解释的文法，一般用来传递被所有解释器共享的数据</p>
<p>2.提供一个解释器抽象类:定义解释器的接口，约定解释器的解释操作</p>
<p>3.提供一个终结符解释器的具体实现类:用来实现语法规则中和终结符相关的操作</p>
<p>4.提供一个非终结符解释器：用来实现语法规则中非终结符相关的操作，通常一个解释器对应一个语法规则，可以包含其他解释器</p>
<h3 id="解释器模式优缺点"><a href="#解释器模式优缺点" class="headerlink" title="解释器模式优缺点"></a>解释器模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>扩展性好。由于在解释器模式中使用类来表示语言的文法规则，因此可以通过继承等机制来改变或扩展文法。</li>
<li>容易实现。在语法树中的每个表达式节点类都是相似的，所以实现其文法较为容易</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>执行效率较低。解释器模式中通常使用大量的循环和递归调用，句子较复杂时，运行速度很慢，且代码的调试过程也比较麻烦</li>
<li>会引起类膨胀。解释器模式中的每条规则至少需要定义一个类，文法规则很多时，类的个数将急剧增加，导致系统难以管理与维护</li>
</ul>
<h3 id="解释器模式实现代码"><a href="#解释器模式实现代码" class="headerlink" title="解释器模式实现代码"></a>解释器模式实现代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a+b-c 表达式求值运算</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;typeinfo&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//抽象表达式</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Expression</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">Interpreter</span><span class="params">(map&lt;string, <span class="type">int</span>&gt;&amp; var)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//变量解析器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VarExpression</span> :<span class="keyword">public</span> Expression </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">VarExpression</span>(string key) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">Interpreter</span><span class="params">(map&lt;string, <span class="type">int</span>&gt;&amp; var)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> var[key];</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string key;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//运算符解析器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SymbolExpression</span> :<span class="keyword">public</span> Expression </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	Expression* left;</span><br><span class="line">	Expression* right;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SymbolExpression</span>(Expression* left, Expression* right) :<span class="built_in">left</span>(left), <span class="built_in">right</span>(right) &#123;&#125;</span><br><span class="line">	<span class="function">Expression* <span class="title">GetLeft</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> left; &#125;</span><br><span class="line">	<span class="function">Expression* <span class="title">GetRight</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> right; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//加法解析器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddExpresion</span> :<span class="keyword">public</span> SymbolExpression </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">AddExpresion</span>(Expression* left, Expression* right) :<span class="built_in">SymbolExpression</span>(left, right) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">Interpreter</span><span class="params">(map&lt;string, <span class="type">int</span>&gt;&amp; var)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> left-&gt;<span class="built_in">Interpreter</span>(var) + right-&gt;<span class="built_in">Interpreter</span>(var);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//减法解析器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubExpresion</span> :<span class="keyword">public</span> SymbolExpression</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SubExpresion</span>(Expression* left, Expression* right) :<span class="built_in">SymbolExpression</span>(left, right) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">Interpreter</span><span class="params">(map&lt;string, <span class="type">int</span>&gt;&amp; var)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> left-&gt;<span class="built_in">Interpreter</span>(var) - right-&gt;<span class="built_in">Interpreter</span>(var);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//解析器封装类   封装调用接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Expression* expression;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//解析表达式，构建语法树  a+b-c</span></span><br><span class="line">	<span class="built_in">Calculator</span>(string expStr)</span><br><span class="line">	&#123;</span><br><span class="line">		expression = <span class="literal">NULL</span>;</span><br><span class="line">		stack&lt;Expression*&gt; stkExp;</span><br><span class="line">		Expression* left = <span class="literal">NULL</span>;</span><br><span class="line">		Expression* right = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;expStr.<span class="built_in">length</span>();i++) </span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">switch</span> (expStr[i]) </span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">				<span class="comment">//先从栈中取出左操作数</span></span><br><span class="line">				left = stkExp.<span class="built_in">top</span>();</span><br><span class="line">				stkExp.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">				<span class="comment">//从表达式中取出+号后面的右操作数，并生成终结符解析对象</span></span><br><span class="line">				right = <span class="keyword">new</span> <span class="built_in">VarExpression</span>(expStr.<span class="built_in">substr</span>(++i, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">				<span class="comment">//将左右操作数相加，并把结果放入栈中</span></span><br><span class="line">				stkExp.<span class="built_in">push</span>(<span class="keyword">new</span> <span class="built_in">AddExpresion</span>(left, right));</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">				<span class="comment">//先从栈中取出左操作数</span></span><br><span class="line">				left = stkExp.<span class="built_in">top</span>();</span><br><span class="line">				stkExp.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">				<span class="comment">//从表达式中取出+号后面的右操作数，并生成终结符解析对象</span></span><br><span class="line">				right = <span class="keyword">new</span> <span class="built_in">VarExpression</span>(expStr.<span class="built_in">substr</span>(++i, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">				<span class="comment">//将左右操作数相加，并把结果放入栈中</span></span><br><span class="line">				stkExp.<span class="built_in">push</span>(<span class="keyword">new</span> <span class="built_in">SubExpresion</span>(left, right));</span><br><span class="line"></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">				stkExp.<span class="built_in">push</span>(<span class="keyword">new</span> <span class="built_in">VarExpression</span>(expStr.<span class="built_in">substr</span>(i, <span class="number">1</span>)));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//栈中保存的就是最终语法树的根结点</span></span><br><span class="line">		<span class="comment">//本例为SubExpression对象</span></span><br><span class="line">		<span class="keyword">if</span> (!stkExp.<span class="built_in">empty</span>()) </span><br><span class="line">		&#123;</span><br><span class="line">			expression = stkExp.<span class="built_in">top</span>();</span><br><span class="line">			stkExp.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">Run</span><span class="params">(map&lt;string, <span class="type">int</span>&gt;&amp; var)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (expression == <span class="literal">NULL</span>) ? <span class="number">0</span> : expression-&gt;<span class="built_in">Interpreter</span>(var);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string expstr = <span class="string">&quot;a+b-c&quot;</span>;</span><br><span class="line">	map&lt;string, <span class="type">int</span>&gt; var;</span><br><span class="line">	var[<span class="string">&quot;a&quot;</span>] = <span class="number">300</span>;</span><br><span class="line">	var[<span class="string">&quot;b&quot;</span>] = <span class="number">20</span>;</span><br><span class="line">	var[<span class="string">&quot;c&quot;</span>] = <span class="number">30</span>;</span><br><span class="line">	<span class="function">Calculator <span class="title">cal</span><span class="params">(expstr)</span></span>;</span><br><span class="line">	cout &lt;&lt; cal.<span class="built_in">Run</span>(var) &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h2><h3 id="什么是迭代器模式"><a href="#什么是迭代器模式" class="headerlink" title="什么是迭代器模式"></a>什么是迭代器模式</h3><p>迭代器模式是一种行为设计模式， 让你能在不暴露集合底层表现形式 （C++STL中的迭代器） 的情况下遍历集合中所有的元素</p>
<h3 id="为什么使用迭代器模式"><a href="#为什么使用迭代器模式" class="headerlink" title="为什么使用迭代器模式"></a>为什么使用迭代器模式</h3><p>迭代器封装了与复杂数据结构进行交互的细节， 为客户端提供多个访问集合元素的简单方法。 这种方式不仅对客户端来说非常方便， 而且能避免客户端在直接与集合交互时执行错误或有害的操作， 从而起到保护集合的作用。</p>
<p>重要迭代算法的代码往往体积非常庞大。 当这些代码被放置在程序业务逻辑中时， 它会让原始代码的职责模糊不清， 降低其可维护性。 因此， 将遍历代码移到特定的迭代器中可使程序代码更加精炼和简洁。</p>
<h3 id="迭代器模式实现步骤"><a href="#迭代器模式实现步骤" class="headerlink" title="迭代器模式实现步骤"></a>迭代器模式实现步骤</h3><p>1.提供一个迭代器类抽象类:抽象实现迭代功能的最小定义方法集</p>
<p>2.提供一个迭代器类:定义实现迭代功能的最小定义方法集</p>
<p>3.提供一个容器抽象类:抽象基本功能以及提供类似迭代器类的方法</p>
<p>4.提供一个容器具体类:定义基本功能以及提供类似迭代器类的方法</p>
<h3 id="迭代器模式优缺点"><a href="#迭代器模式优缺点" class="headerlink" title="迭代器模式优缺点"></a>迭代器模式优缺点</h3><p><strong>优点</strong></p>
<ul>
<li>单一职责原则： 通过将体积庞大的遍历算法代码抽取为独立的类， 你可对客户端代码和集合进行整理</li>
<li>开闭原则： 你可实现新型的集合和迭代器并将其传递给现有代码， 无需修改现有代码</li>
<li>你可以并行遍历同一集合， 因为每个迭代器对象都包含其自身的遍历状态</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>如果你的程序只与简单的集合进行交互， 应用该模式可能会矫枉过正</li>
<li>对于某些特殊集合， 使用迭代器可能比直接遍历的效率低</li>
</ul>
<h3 id="迭代器模式实现代码"><a href="#迭代器模式实现代码" class="headerlink" title="迭代器模式实现代码"></a>迭代器模式实现代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//迭代器模式</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line">template &lt;typename T,typename U&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterator</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">	<span class="keyword">typedef</span> typename <span class="built_in">vector</span>&lt;T&gt;::iterator iter_type;</span><br><span class="line">	Iterator(U* data, <span class="type">bool</span> reverse = <span class="literal">false</span>) :m_data(data)</span><br><span class="line">	&#123;</span><br><span class="line">		iter = data-&gt;m_data.begin();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">Begin</span><span class="params">()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		iter = m_data-&gt;m_data.begin();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">Next</span><span class="params">()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		iter++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">bool</span> <span class="title function_">End</span><span class="params">()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> (iter == m_data-&gt;m_data.end());</span><br><span class="line">	&#125;</span><br><span class="line">	iter_type <span class="title function_">Current</span><span class="params">()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> iter;</span><br><span class="line">	&#125;</span><br><span class="line">private:</span><br><span class="line">	U* m_data;</span><br><span class="line">	iter_type iter;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Container</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	friend <span class="class"><span class="keyword">class</span> <span class="title">Iterator</span>&lt;</span>T, Container&gt;;</span><br><span class="line">public:</span><br><span class="line">	<span class="type">void</span> <span class="title function_">Add</span><span class="params">(T data)</span> </span><br><span class="line">	&#123;</span><br><span class="line">		m_data.push_back(data);</span><br><span class="line">	&#125;</span><br><span class="line">	Iterator&lt;T, Container&gt;* <span class="title function_">CreateIterator</span><span class="params">()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> new Iterator&lt;T, Container&gt;(this);</span><br><span class="line">	&#125;</span><br><span class="line">protected:</span><br><span class="line">	<span class="built_in">vector</span>&lt;T&gt; m_data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">public:</span><br><span class="line">	Data(<span class="type">int</span> data = <span class="number">0</span>) :m_data(data) &#123;&#125;</span><br><span class="line">	<span class="type">void</span> <span class="title function_">SetData</span><span class="params">(<span class="type">int</span> data)</span> </span><br><span class="line">	&#123;</span><br><span class="line">		m_data = data;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> <span class="title function_">data</span><span class="params">()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> m_data;</span><br><span class="line">	&#125;</span><br><span class="line">private:</span><br><span class="line">	<span class="type">int</span> m_data;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	Container&lt;<span class="type">int</span>&gt; test;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) </span><br><span class="line">	&#123;</span><br><span class="line">		test.Add(i);</span><br><span class="line">	&#125;</span><br><span class="line">	Iterator&lt;<span class="type">int</span>, Container&lt;<span class="type">int</span>&gt;&gt;* iter = test.CreateIterator();</span><br><span class="line">	<span class="keyword">for</span> (iter-&gt;Begin(); !iter-&gt;End(); iter-&gt;Next()) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; *iter-&gt;Current() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	Container&lt;Data&gt; test2;</span><br><span class="line">	test2.Add(Data(<span class="number">100</span>));</span><br><span class="line">	test2.Add(Data(<span class="number">200</span>));</span><br><span class="line">	test2.Add(Data(<span class="number">300</span>));</span><br><span class="line">	Iterator&lt;Data, Container&lt;Data&gt;&gt;* iter2 = test2.CreateIterator();</span><br><span class="line">	<span class="keyword">for</span> (iter2-&gt;Begin(); !iter2-&gt;End(); iter2-&gt;Next())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; iter2-&gt;Current()-&gt;data() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="设计模式总结"><a href="#设计模式总结" class="headerlink" title="设计模式总结"></a>设计模式总结</h2><h3 id="创建型的模式总结"><a href="#创建型的模式总结" class="headerlink" title="创建型的模式总结"></a>创建型的模式总结</h3><ul>
<li>工厂模式模式：单个类的对象创建工作</li>
<li>抽象工厂模式：多个类的对象创建工作</li>
<li>单例模式:类的全局对象创建工作</li>
<li>建造者模式：复杂类的对象创建工作</li>
<li>原型模式：自身类的克隆工作</li>
</ul>
<h3 id="结构体型模式总结"><a href="#结构体型模式总结" class="headerlink" title="结构体型模式总结"></a>结构体型模式总结</h3><ul>
<li>代理模式：提供第三方进行控制访问对象</li>
<li>装饰者模式：为对象添加新功能</li>
<li>适配器模式：不兼容的类进行融合过程</li>
<li>桥接模式：分离变化部分成为独立的一部分</li>
<li>组合模式：整体和局部进行递归组合</li>
<li>外观模式: 表面工程(对外提供统一接口访问子系统)</li>
<li>享元模式:使用对象池减少重复对象的创建</li>
</ul>
<h3 id="行为型模式总结"><a href="#行为型模式总结" class="headerlink" title="行为型模式总结"></a>行为型模式总结</h3><ul>
<li>模板方法模式：通过定义一套流程模板进行流程化处理</li>
<li>命令模式：请求成为命令，记录下</li>
<li>责任链模式：踢皮球(对象连接成为链，通过链进行传递请求)</li>
<li>策略模式：封装不同算法，算法之间可以互相转换</li>
<li>中介者模式：租房中介(中介者类做转发操作)</li>
<li>观察者模式：交通警察指挥路口(状态发生改变通知观察者)</li>
<li>备忘录模式：保存对象状态，可以进行恢复</li>
<li>访问者模式：稳定的数据结构，定义新的操作行为</li>
<li>状态模式：根据不同的状态做不同的行为</li>
<li>解释器模式：给定规则，定义语法，定义解释器，做句子分析(摩斯码解析过程)</li>
<li>迭代器模式：提供一个中方法顺序的访问复合对象的各个元素</li>
</ul>
<h3 id="关于设计模式的建议"><a href="#关于设计模式的建议" class="headerlink" title="关于设计模式的建议"></a>关于设计模式的建议</h3><ul>
<li>不存在完美的设计模式，只存在最适合的设计模式</li>
<li>原有的设计模式并不重要，设计原则才是最重要</li>
<li>有意无意注意模式问题，通过原则写出自己的设计方法才是最重要的</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag"># 设计模式</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/7f23363e.html" rel="prev" title="c++17版本更新">
      <i class="fa fa-chevron-left"></i> c++17版本更新
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/4cc7bea9.html" rel="next" title="前端技术">
      前端技术 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%88%86%E7%B1%BB"><span class="nav-number">1.1.</span> <span class="nav-text">设计模式分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="nav-number">1.2.</span> <span class="nav-text">面向对象的设计原则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99-DIP"><span class="nav-number">1.2.1.</span> <span class="nav-text">依赖倒置原则(DIP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E6%94%BE%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99-OCP"><span class="nav-number">1.2.2.</span> <span class="nav-text">开放封闭原则(OCP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99-SRP"><span class="nav-number">1.2.3.</span> <span class="nav-text">单一职责原则(SRP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99-LSP"><span class="nav-number">1.2.4.</span> <span class="nav-text">里氏替换原则(LSP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99-ISP"><span class="nav-number">1.2.5.</span> <span class="nav-text">接口隔离原则(ISP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%98%E5%85%88%E7%BB%84%E5%90%88%E4%B8%8D%E6%98%AF%E7%BB%A7%E6%89%BF%E5%8E%9F%E5%88%99-CARP"><span class="nav-number">1.2.6.</span> <span class="nav-text">优先组合不是继承原则(CARP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99-LOD"><span class="nav-number">1.2.7.</span> <span class="nav-text">迪米特法则(LOD)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#c-%E7%B1%BB%E5%9B%BE"><span class="nav-number">1.3.</span> <span class="nav-text">c++类图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%9B%BE"><span class="nav-number">1.3.1.</span> <span class="nav-text">什么是类图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9B%BE%E4%BD%9C%E7%94%A8"><span class="nav-number">1.3.2.</span> <span class="nav-text">类图作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9B%BE%E7%9A%84%E5%85%83%E7%B4%A0"><span class="nav-number">1.3.3.</span> <span class="nav-text">类图的元素</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%9B%BE%E4%B8%AD%E7%B1%BB%E7%9A%84%E7%BB%84%E6%88%90"><span class="nav-number">1.4.</span> <span class="nav-text">类图中类的组成</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E4%B8%AD%E5%9B%BE%E7%B1%BB%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-number">1.4.1.</span> <span class="nav-text">类中图类的关系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.5.</span> <span class="nav-text">单例设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.5.1.</span> <span class="nav-text">什么是单例模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.5.2.</span> <span class="nav-text">单例模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.5.3.</span> <span class="nav-text">为什么使用单例模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.5.4.</span> <span class="nav-text">单例模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.5.5.</span> <span class="nav-text">单例模式实现代码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%87%92%E6%B1%89%E5%BC%8F"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">懒汉式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A5%BF%E6%B1%89%E5%BC%8F"><span class="nav-number">1.5.5.2.</span> <span class="nav-text">饿汉式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.6.</span> <span class="nav-text">简单工厂模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82"><span class="nav-number">1.6.1.</span> <span class="nav-text">什么是简单工厂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82"><span class="nav-number">1.6.2.</span> <span class="nav-text">为什么使用简单工厂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.6.3.</span> <span class="nav-text">简单工厂实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.6.4.</span> <span class="nav-text">简单工厂优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.6.5.</span> <span class="nav-text">简单工厂实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.7.</span> <span class="nav-text">工厂模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.7.1.</span> <span class="nav-text">什么是工厂模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.7.2.</span> <span class="nav-text">为什么使用工厂模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.7.3.</span> <span class="nav-text">工厂模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.7.4.</span> <span class="nav-text">工厂模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.7.5.</span> <span class="nav-text">工厂模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.8.</span> <span class="nav-text">抽象工厂模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.8.1.</span> <span class="nav-text">什么是抽象工厂模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.8.2.</span> <span class="nav-text">为什么使用抽象工厂模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.8.3.</span> <span class="nav-text">抽象工厂模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.8.4.</span> <span class="nav-text">抽象工厂模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.8.5.</span> <span class="nav-text">抽象工厂模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.9.</span> <span class="nav-text">建造者模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.9.1.</span> <span class="nav-text">什么是建造者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.9.2.</span> <span class="nav-text">为什么使用建造者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.9.3.</span> <span class="nav-text">建造者模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.9.4.</span> <span class="nav-text">建造者模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.9.5.</span> <span class="nav-text">建造者模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.10.</span> <span class="nav-text">原型模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.10.1.</span> <span class="nav-text">什么是原型模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.10.2.</span> <span class="nav-text">为什么使用原型模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.10.3.</span> <span class="nav-text">原型模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.10.4.</span> <span class="nav-text">原型模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.10.5.</span> <span class="nav-text">原型模式实现代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.10.6.</span> <span class="nav-text">创建型模式总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.</span> <span class="nav-text">代理模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.1.</span> <span class="nav-text">什么是代理模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.2.</span> <span class="nav-text">为什么使用代理模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.11.3.</span> <span class="nav-text">代理模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.11.4.</span> <span class="nav-text">代理模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.11.5.</span> <span class="nav-text">代理模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.12.</span> <span class="nav-text">装饰模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.12.1.</span> <span class="nav-text">什么是装饰模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.12.2.</span> <span class="nav-text">为什么使用装饰模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.12.3.</span> <span class="nav-text">装饰模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.12.4.</span> <span class="nav-text">装饰模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E4%BB%A3%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.12.5.</span> <span class="nav-text">装饰模式代实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.13.</span> <span class="nav-text">适配器模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.13.1.</span> <span class="nav-text">什么是适配器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.13.2.</span> <span class="nav-text">为什么使用适配器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.13.3.</span> <span class="nav-text">适配器模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.13.4.</span> <span class="nav-text">适配器模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.13.5.</span> <span class="nav-text">适配器模式实现代码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.13.5.1.</span> <span class="nav-text">对象适配器实现代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E9%80%82%E9%85%8D%E5%99%A8%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.13.5.2.</span> <span class="nav-text">类适配器实现代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.14.</span> <span class="nav-text">桥接模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.14.1.</span> <span class="nav-text">什么是桥接模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.14.2.</span> <span class="nav-text">为什么使用桥接模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.14.3.</span> <span class="nav-text">桥接模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.14.4.</span> <span class="nav-text">桥接模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.14.5.</span> <span class="nav-text">桥接模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.15.</span> <span class="nav-text">外观模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.15.1.</span> <span class="nav-text">什么是外观模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.15.2.</span> <span class="nav-text">为什么使用外观模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.15.3.</span> <span class="nav-text">外观模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.15.4.</span> <span class="nav-text">外观模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.15.5.</span> <span class="nav-text">外观模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.16.</span> <span class="nav-text">享元模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.16.1.</span> <span class="nav-text">什么是享元模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.16.2.</span> <span class="nav-text">为什么使用享元模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.16.3.</span> <span class="nav-text">享元模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.16.4.</span> <span class="nav-text">享元模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.16.5.</span> <span class="nav-text">享元模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.17.</span> <span class="nav-text">组合模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.17.1.</span> <span class="nav-text">什么是组合模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.17.2.</span> <span class="nav-text">为什么使用组合模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.17.3.</span> <span class="nav-text">组合模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.17.4.</span> <span class="nav-text">组合模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.17.5.</span> <span class="nav-text">组合模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.18.</span> <span class="nav-text">模板模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.18.1.</span> <span class="nav-text">什么是模板模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.18.2.</span> <span class="nav-text">为什么使用模板模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.18.3.</span> <span class="nav-text">模板模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.18.4.</span> <span class="nav-text">模板模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.18.5.</span> <span class="nav-text">模板模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.19.</span> <span class="nav-text">命令模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.19.1.</span> <span class="nav-text">什么是命令模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.19.2.</span> <span class="nav-text">为什么使用命令模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.19.3.</span> <span class="nav-text">命令模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.19.4.</span> <span class="nav-text">命令模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.19.5.</span> <span class="nav-text">命令模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.20.</span> <span class="nav-text">责任链模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.20.1.</span> <span class="nav-text">什么是责任链模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.20.2.</span> <span class="nav-text">为什么使用责任链模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.20.3.</span> <span class="nav-text">责任链模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.20.4.</span> <span class="nav-text">责任链模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.20.5.</span> <span class="nav-text">责任链模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.21.</span> <span class="nav-text">策略模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.21.1.</span> <span class="nav-text">什么是策略模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.21.2.</span> <span class="nav-text">为什么使用策略模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.21.3.</span> <span class="nav-text">策略模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.21.4.</span> <span class="nav-text">策略模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.21.5.</span> <span class="nav-text">策略模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.22.</span> <span class="nav-text">观察者模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.22.1.</span> <span class="nav-text">什么是观察者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.22.2.</span> <span class="nav-text">为什么使用观察者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.22.3.</span> <span class="nav-text">观察者模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.22.4.</span> <span class="nav-text">观察者模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.22.5.</span> <span class="nav-text">观察者模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.23.</span> <span class="nav-text">访问者模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.23.1.</span> <span class="nav-text">什么是访问者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.23.2.</span> <span class="nav-text">为什么使用访问者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.23.3.</span> <span class="nav-text">访问者模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.23.4.</span> <span class="nav-text">访问者模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.23.5.</span> <span class="nav-text">访问者模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.24.</span> <span class="nav-text">中介者模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.24.1.</span> <span class="nav-text">什么是中介者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.24.2.</span> <span class="nav-text">为什么使用中介者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.24.3.</span> <span class="nav-text">中介者模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.24.4.</span> <span class="nav-text">中介者模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.24.5.</span> <span class="nav-text">中介者模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.25.</span> <span class="nav-text">备忘录模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.25.1.</span> <span class="nav-text">什么是备忘录模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.25.2.</span> <span class="nav-text">为什么使用备忘录模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.25.3.</span> <span class="nav-text">备忘录模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.25.4.</span> <span class="nav-text">备忘录模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.25.5.</span> <span class="nav-text">备忘录模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.26.</span> <span class="nav-text">状态模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.26.1.</span> <span class="nav-text">什么是状态模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.26.2.</span> <span class="nav-text">为什么使用状态模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.26.3.</span> <span class="nav-text">状态模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.26.4.</span> <span class="nav-text">状态模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.26.5.</span> <span class="nav-text">状态模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.27.</span> <span class="nav-text">解释器模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.27.1.</span> <span class="nav-text">什么是解释器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.27.2.</span> <span class="nav-text">为什么使用解释器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.27.3.</span> <span class="nav-text">解释器模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.27.4.</span> <span class="nav-text">解释器模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.27.5.</span> <span class="nav-text">解释器模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.28.</span> <span class="nav-text">迭代器模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.28.1.</span> <span class="nav-text">什么是迭代器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.28.2.</span> <span class="nav-text">为什么使用迭代器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.28.3.</span> <span class="nav-text">迭代器模式实现步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.28.4.</span> <span class="nav-text">迭代器模式优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="nav-number">1.28.5.</span> <span class="nav-text">迭代器模式实现代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.29.</span> <span class="nav-text">设计模式总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9E%8B%E7%9A%84%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.29.1.</span> <span class="nav-text">创建型的模式总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E5%9E%8B%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.29.2.</span> <span class="nav-text">结构体型模式总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.29.3.</span> <span class="nav-text">行为型模式总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BB%BA%E8%AE%AE"><span class="nav-number">1.29.4.</span> <span class="nav-text">关于设计模式的建议</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Wxy"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">Wxy</p>
  <div class="site-description" itemprop="description">故事开始于2025/2/24 15：47</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">7</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wxy</span>
</div>
  <div class="powered-by">
  </div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>
<script type="text/javascript" src="/js/click_love.js"></script>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
